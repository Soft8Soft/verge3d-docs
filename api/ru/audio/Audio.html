<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body>
    [page:Object3D] &rarr;

    <h1>[name]</h1>

    <p class="desc">
      Создаёт непозиционный (глобальный) аудиообъект.
    </p>
    <p>
      Для этого используется [link:https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API Web Audio API].
    </p>

    <h2>Пример кода</h2>

    <code>
    // create an AudioListener and add it to the camera
    const listener = new v3d.AudioListener();
    camera.add(listener);

    // create a global audio source
    const sound = new v3d.Audio(listener);

    // load a sound and set it as the Audio object's buffer
    const audioLoader = new v3d.AudioLoader();
    audioLoader.load('sounds/ambient.ogg', function(buffer) {
      sound.setBuffer(buffer);
      sound.setLoop(true);
      sound.setVolume(0.5);
      sound.play();
    });
    </code>


    <h2>Конструктор</h2>


    <h3>[name]([param:AudioListener listener])</h3>
    <p>
    listener — (необходимый) экземпляр [page:AudioListener AudioListener].
    </p>


    <h2>Свойства</h2>

    <h3>[property:Boolean autoplay]</h3>
    <p>Должно ли воспроизведение начинаться автоматически. По умолчанию *false*.</p>

    <h3>[property:AudioContext context]</h3>
    <p>[link:https://developer.mozilla.org/en-US/docs/Web/API/AudioContext AudioContext] слушателя [page:AudioListener listener], заданного в конструкторе.</p>

    <h3>[property:Number detune]</h3>
    <p>Изменение высоты тона, измеряется в центах. +/- 100 - это полутон. +/- 1200 - октава. По умолчанию *0*.</p>

    <h3>[property:Array filters]</h3>
    <p>Представляет собой массив [link:https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode BiquadFilterNodes]. Может использоваться для применения различных фильтров низкого порядка для создания более сложных звуковых эффектов. Фильтры устанавливаются через [page:Audio.setFilter] или [page:Audio.setFilters].</p>

    <h3>[property:GainNode gain]</h3>
    <p>Узел [link:https://developer.mozilla.org/en-US/docs/Web/API/GainNode GainNode], созданный с помощью [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/createGain AudioContext.createGain]().</p>

    <h3>[property:Boolean hasPlaybackControl]</h3>
    <p>Можно ли управлять воспроизведением с помощью методов [page:Audio.play play](),
      [page:Audio.pause pause]() и т.д.. По умолчанию *true*.</p>

    <h3>[property:Boolean isPlaying]</h3>
    <p>Воспроизводится ли аудио в данный момент.</p>

    <h3>[property:AudioListener listener]</h3>
    <p>Ссылка на listener object данного аудио.</p>

    <h3>[property:Number playbackRate]</h3>
    <p>Скорость воспроизведения. По умолчанию *1*.</p>

    <h3>[property:Number offset]</h3>
    <p>Смещение до времени в аудиобуфере, когда должно начаться воспроизведение. Аналогично параметру *offset* в [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode/start AudioBufferSourceNode.start](). По умолчанию *0*.</p>

    <h3>[property:Number duration]</h3>
    <p>Переопределяет длительность аудио. Аналогично параметру *duration* в [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode/start AudioBufferSourceNode.start](). По умолчанию *undefined* для воспроизведения всего буфера.</p>

    <h3>[property:String source]</h3>
    <p>Нода [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode AudioBufferSourceNode] созданная с помощью [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/createBufferSource AudioContext.createBufferSource]().</p>

    <h3>[property:String sourceType]</h3>
    <p>Тип источника звука. По умолчанию это строка 'empty'.</p>

    <h3>[property:String type]</h3>
    <p>Строка, обозначающая тип, установленная на 'Audio'.</p>


    <h2>Methods</h2>

    <h3>[method:Audio connect]()</h3>
    <p>
      Подключение к [page:Audio.source]. Это используется внутри при инициализации и при установке/удалении фильтров.
    </p>

    <h3>[method:Audio disconnect]()</h3>
    <p>
      Отключить от [page:Audio.source]. Используется внутренне при установке/удалении фильтров.
    </p>

    <h3>[method:BiquadFilterNode getFilter]()</h3>
    <p>
      Возвращает первый элемент массива [page:Audio.filters filters].
    </p>

    <h3>[method:Array getFilters]()</h3>
    <p>
      Возвращает массив [page:Audio.filters filters].
    </p>

    <h3>[method:Boolean getLoop]()</h3>
    <p>
    Возвращает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode/loop source.loop]
     (должно ли воспроизведение зацикливаться).
    </p>

    <h3>[method:GainNode getOutput]()</h3>
    <p>
    Возвращает [page:Audio.gain gainNode].
    </p>

    <h3>[method:Float getPlaybackRate]()</h3>
    <p>
    Возвращает значение параметра [page:Audio.playbackRate playbackRate].
    </p>

    <h3>[method:Float getVolume](value)</h3>
    <p>
    Возвращает текущую громкость.
    </p>

    <h3>[method:Audio play](delay)</h3>
    <p>
      Если [page:Audio.hasPlaybackControl hasPlaybackControl] равно true, начинается воспроизведение.
    </p>

    <h3>[method:Audio pause]()</h3>
    <p>
      Если [page:Audio.hasPlaybackControl hasPlaybackControl] равно true, приостанавливает воспроизведение.
    </p>

    <h3>[method:null onEnded]()</h3>
    <p>
      Вызывается автоматически по окончании воспроизведения.
    </p>

    <h3>[method:Audio setBuffer](audioBuffer)</h3>
    <p>
      Устанавливает audioBuffer в [page:Audio.source source] , и 'buffer' в [page:Audio.sourceType sourceType].
      <br>
       Если [page:Audio.autoplay autoplay], также запускается воспроизведение.
    </p>

    <h3>[method:Audio setFilter](filter)</h3>
    <p>
      Применяет один [link:https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode BiquadFilterNode] к аудио.
    </p>

    <h3>[method:Audio setFilters]([param:Array value])</h3>
    <p>
      value - массивы фильтров.<br>
      Применяет массив [link:https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode BiquadFilterNodes]  к аудио.
    </p>

    <h3>[method:Audio setLoop]([param:Boolean value])</h3>
    <p>
      Устанавилвает [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode/loop source.loop] в *value*
    (должно ли воспроизведение зацикливаться).
    </p>

    <h3>[method:Audio setLoopStart]([param:Float value])</h3>
    <p>
      Устанавилвает [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode/loopStart source.loopStart] в *value*.
    </p>

    <h3>[method:Audio setLoopEnd]([param:Float value])</h3>
    <p>
      Устанавилвает [link:https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode/loopEnd source.loopEnd] в *value*.
    </p>

    <h3>[method:Audio setMediaElementSource](mediaElement)</h3>
    <p>
      Применяет данный объект типа [link:https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement HTMLMediaElement] в качестве источника этого аудио.<br>
      Также устанавливает [page:Audio.hasPlaybackControl hasPlaybackControl] в false.
    </p>

    <h3>[method:Audio setMediaStreamSource](mediaStream)</h3>
    <p>
    Применяет данный объект типа [link:https://developer.mozilla.org/en-US/docs/Web/API/MediaStream MediaStream] в качестве источника данного аудио.<br>
    Также устанавливает [page:Audio.hasPlaybackControl hasPlaybackControl] в false.
    </p>

    <h3>[method:Audio setNodeSource](audioNode)</h3>
    <p>
      Устанавливает [page:Audio.source source] в audioBuffer и устанавливает [page:Audio.sourceType sourceType] в 'audioNode'.<br>
      Также устанавливает [page:Audio.hasPlaybackControl hasPlaybackControl] в false.
    </p>

    <h3>[method:Audio setPlaybackRate]([param:Float value])</h3>
    <p>
      Если [page:Audio.hasPlaybackControl hasPlaybackControl] включен, установите [page:Audio.playbackRate playbackRate] в *value*.
    </p>

    <h3>[method:Audio setVolume]([param:Float value])</h3>
    <p>
    Установите громкость.
    </p>

    <h3>[method:Audio stop]()</h3>
    <p>
      Если [page:Audio.hasPlaybackControl hasPlaybackControl] включен, останавливает воспроизведение.
    </p>

    [sourceHint]
  </body>
</html>
