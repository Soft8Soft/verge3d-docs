<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body>
    [page:Object3D] &rarr; [page:Audio] &rarr;

    <h1>[name]</h1>

    <p class="desc">
      Создаёт позиционный аудиообъект.
    </p>
    <p>
      Использует [link:https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API Web Audio API].
    </p>

    <h2>Пример кода</h2>

    <code>
    // создаём AudioListener и добавляем его к камере
    const listener = new v3d.AudioListener();
    camera.add(listener);

    // создаём объект PositionalAudio (добавляем к listener)
    const sound = new v3d.PositionalAudio(listener);

    // загружаем звук и добавляем как буфер для PositionalAudio
    const audioLoader = new v3d.AudioLoader();
    audioLoader.load('sounds/song.ogg', function(buffer) {
      sound.setBuffer(buffer);
      sound.setRefDistance(20);
      sound.play();
    });

    // создаём объект-источник
    const sphere = new v3d.SphereGeometry(20, 32, 16);
    const material = new v3d.MeshLambertMaterial({ color: 0xff2200 });
    const mesh = new v3d.Mesh(sphere, material);
    app.scene.add(mesh);

    // добавляем звук к источнику
    mesh.add(sound);
    </code>


    <h2>Конструктор</h2>

    <h3>[name]([param:AudioListener listener])</h3>
    <p>
      listener — (необходимый) экземпляр [page:AudioListener AudioListener].
    </p>


    <h2>Свойства</h2>

    <p>
      Наследуемые свойства смотрите в классе [page:Audio Audio].
    </p>

    <h3>[property:PannerNode panner]</h3>
    <p>
      Нода PositionalAudio [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode PannerNode].
    </p>


    <h2>Методы</h2>

    <p>
      Наследуемые методы смотрите в классе [page:Audio Audio].
    </p>

    <h3>[method:PannerNode getOutput]()</h3>
    <p>
      Возвращает [page:PositionalAudio.panner panner].
    </p>

    <h3>[method:Float getRefDistance]()</h3>
    <p>
      Возвращает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/refDistance panner.refDistance].
    </p>

    <h3>[method:this setRefDistance]([param:Float value])</h3>
    <p>
      Устанавливает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/refDistance panner.refDistance].
    </p>

    <h3>[method:Float getRolloffFactor]()</h3>
    <p>
      Возвращает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/rolloffFactor panner.rolloffFactor].
    </p>

    <h3>[method:this setRolloffFactor]([param:Float value])</h3>
    <p>
      Устанавливает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/rolloffFactor panner.rolloffFactor].
    </p>

    <h3>[method:String getDistanceModel]()</h3>
    <p>
      Возвращает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/distanceModel panner.distanceModel].
    </p>

    <h3>[method:this setDistanceModel]([param:String value])</h3>
    <p>
      Устанавливает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/distanceModel panner.distanceModel].
    </p>

    <h3>[method:Float getMaxDistance]()</h3>
    <p>
      Возвращает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/maxDistance panner.maxDistance].
    </p>

    <h3>[method:this setMaxDistance]([param:Float value])</h3>
    <p>
      Устанавливает значение параметра [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/maxDistance panner.maxDistance].
    </p>

    <h3>[method:this setDirectionalCone]([param:Float coneInnerAngle], [param:Float coneOuterAngle], [param:Float coneOuterGain])</h3>
    <p>
      Этот метод можно использовать для преобразования всенаправленного звука в [link:https://developer.mozilla.org/en-US/docs/Web/API/PannerNode directional sound].
    </p>

    [sourceHint]
  </body>
</html>
