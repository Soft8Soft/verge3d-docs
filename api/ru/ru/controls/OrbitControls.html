<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <base href="../../../" />
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css" />
  </head>
  <body>
    <h1>[name]</h1>

    <div class="desc">
      Элементы управления орбитой позволяют камере двигаться по орбите вокруг целевого объекта.<br>
    </div>


    <h2>Пример</h2>

    <div>[example:misc_controls_orbit misc / controls / orbit]</div>

    <code>
var renderer = new v3d.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

var scene = new v3d.Scene();

var  camera = new v3d.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000);

var controls = new v3d.OrbitControls(camera);

//controls.update() must be called after any manual changes to the camera's transform
camera.position.set(0, 20, 100);
controls.update();

function animate() {

  requestAnimationFrame(animate);

  // required if controls.enableDamping or controls.autoRotate are set to true
  controls.update();

  renderer.render(scene, camera);

}
    </code>

    <h2>Конструктор</h2>

    <h3>[name]([page:Camera object], [page:HTMLDOMElement domElement])</h3>
    <div>
      [page:Camera object]: (требуется) Камера, которой необходимо управлять.<br><br>

      [page:HTMLDOMElement domElement]: (необязательно) Элемент HTML, используемый для слушателей событий. По умолчанию это весь документ, однако если вы хотите, чтобы элементы управления работали только над определенным элементом (например, холстом), вы можете указать это здесь.
    </div>


    <h2>Свойства</h2>

    <h3>[property:Boolean autoRotate]</h3>
    <div>
      Установите значение true для автоматического вращения вокруг целевого объекта.<br> Обратите внимание, что если эта функция включена, вы должны вызвать [page:.update] () в цикле анимации.
    </div>

    <h3>[property:Float autoRotateSpeed]</h3>
    <div>
      Скорость вращения вокруг целевого объекта, если [property:Boolean autoRotate] равно true. По умолчанию 2.0, что соответствует 30 секундам на вращение при 60 кадр/с.<br> Обратите внимание, что если включено [property:Boolean autoRotate], необходимо вызвать [page:.update] () в цикле анимации.
    </div>

    <h3>
      [property:Float dampingFactor]</h3>
    <div>
      Инерция демпфирования, используемая, если [property:Boolean enableDamping] установлено в true.<br> Обратите внимание, что для того, чтобы это сработало, вы должны вызвать [page:.update] () в цикле анимации.
    </div>

    <h3>[property:HTMLDOMElement domElement]</h3>
    <div>
      Элемент HTMLDOMElement, используемый для прослушивания событий мыши/прикосновения. Он должен быть передан в конструкторе; изменение его здесь не приведет к установке новых слушателей событий. По умолчанию это весь документ.
    </div>

    <h3>[property:Boolean enabled]</h3>
    <div>
      Включены ли элементы управления или нет.
    </div>

    <h3>[property:Boolean enableDamping]</h3>
    <div>
      Установите значение true, чтобы включить демпфирование (инерцию), которое можно использовать для придания чувства веса элементам управления. По умолчанию установлено значение false.<br>          Обратите внимание, что если эта функция включена, необходимо вызвать [page:.update] () в цикле анимации.
    </div>

    <h3>[property:Boolean enableKeys]</h3>
    <div>
      Включите или отключите использование элементов управления с клавиатуры.
    </div>

    <h3>[property:Boolean enablePan]</h3>
    <div>
      Включить или отключить панорамирование камеры. По умолчанию - true.
    </div>

    <h3>[property:Boolean enableRotate]</h3>
    <div>
      Включить или отключить поворот камеры по горизонтали и вертикали. По умолчанию - true.<br>
      Обратите внимание, что можно отключить одну ось, установив минимальное и максимальное значение [page:.minPolarAngle polar angle] или [page:.minAzimuthAngle azimuth angle] на одно и то же значение, что приведет к фиксации вертикального или горизонтального вращения на этом значении.
    </div>

    <h3>[property:Boolean enableZoom]</h3>
    <div>
      Включение или отключение масштабирования (dollying) камеры.
    </div>

    <h3>[property:Float keyPanSpeed]</h3>
    <div>
      Скорость панорамирования камеры при использовании клавиатуры. По умолчанию - 7,0 пикселей за одно нажатие клавиши.
    </div>

    <h3>[property:Object keys]</h3>
    <div>
      Этот объект содержит ссылки на коды клавиш для управления панорамированием камеры. По умолчанию это 4 клавиши со стрелками.
      <code>
controls.keys = {
  LEFT: 37, //left arrow
  UP: 38, // up arrow
  RIGHT: 39, // right arrow
  BOTTOM: 40 // down arrow
}
       </code> Полный список кодов ключей смотрите на [link:https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode this page].
    </div>

    <h3>[property:Float maxAzimuthAngle]</h3>
    <div>
      Как далеко вы можете двигаться по горизонтали, верхний предел. Диапазон - от Math.PI до Math.PI (или бесконечность для отсутствия предела), по умолчанию - Infinity(Бесконечность);
    </div>

    <h3>[property:Float maxDistance]</h3>
    <div>
      Как далеко вы можете отдалиться (только для [page:PerspectiveCamera]). По умолчанию - Infinity(Бесконечность).
    </div>

    <h3>[property:Float maxPolarAngle]</h3>
    <div>
      Как далеко вы можете двигаться по вертикали, верхний предел. Диапазон от 0 до Math.PI радиан, по умолчанию - Math.PI.
    </div>

    <h3>[property:Float maxZoom]</h3>
    <div>
      Насколько можно уменьшить масштаб изображения (только для [page:OrthographicCamera]). По умолчанию - Infinity(Бесконечность).
    </div>

    <h3>[property:Float minAzimuthAngle]</h3>
    <div>
      Как далеко вы можете двигаться по горизонтали, нижний предел. Диапазон от - Math.PI до Math.PI (или - Infinity для отсутствия предела), по умолчанию - Infinity(Бесконечность); 
    </div>

    <h3>[property:Float minDistance]</h3>
    <div>
      Насколько далеко вы можете наклоняться (только для [page:PerspectiveCamera]). По умолчанию 0.
    </div>

    <h3>[property:Float minPolarAngle]</h3>
    <div>
      Как далеко вы можете двигаться по вертикали, нижний предел. Диапазон от 0 до Math.PI радиан, по умолчанию - 0.
    </div>

    <h3>[property:Float minZoom]</h3>
    <div>
      Насколько сильно можно увеличить масштаб изображения (только для [page:OrthographicCamera]). По умолчанию 0.
    </div>

    <h3>
      [property:Object mouseButtons]</h3>
    <div>
      Этот объект содержит ссылки на кнопки мыши, используемые для элементов управления.
      <code>
controls.mouseButtons = {
  ROTATE: v3d.MOUSE.LEFT,
  ZOOM: v3d.MOUSE.MIDDLE,
  PAN: v3d.MOUSE.RIGHT
}
      </code>
    </div>

    <h3>[property:Camera object]</h3>
    <div>
      Камера (или другой объект), которой управляют.
    </div>

    <h3>[property:Vector3 position0]</h3>
    <div>
      Используется внутренними методами [page:.saveState] и [page:.reset].
    </div>

    <h3>[property:Float rotateSpeed]</h3>
    <div>
      Скорость вращения. По умолчанию - 1.
    </div>

    <h3>[property:Boolean screenSpacePanning]</h3>
    <div>
      Определяет, как переводится положение камеры при панорамировании. Если true, камера поворачивается в пространстве экрана. В противном случае камера поворачивается в плоскости, ортогональной направлению движения камеры вверх. По умолчанию true.
    </div>

    <h3>[property:Vector3 target0]</h3>
    <div>
      Используется внутренними методами [page:.saveState] и [page:.reset].
    </div>

    <h3>[property:Object3D targetObj]</h3>
    <div>
      Объект3D, положение которого в мировом пространстве служит точкой фокуса элементов управления, а [page:.object] вращается вокруг него. Его можно обновить вручную в любой момент, чтобы изменить фокус элементов управления.
    </div>

    <h3>[property:Float zoom0]</h3>
    <div>
      Используется внутренними методами [page:.saveState] и [page:.reset].
    </div>

    <h3>[property:Float zoomSpeed]</h3>
    <div>
      Скорость масштабирования/приближения. По умолчанию 1.
    </div>



    <h2>Методы</h2>

    <h3>[method:null dispose] ()</h3>
    <div>
      Удалите все слушатели событий.
    </div>

    <h3>[method:radians getAzimuthalAngle] ()</h3>
    <div>
      Получение текущего горизонтального вращения, в радианах.
    </div>

    <h3>[method:radians getPolarAngle] ()</h3>
    <div>
      Получение текущего вертикального вращения, в радианах.
    </div>

    <h3>[method:null reset] ()</h3>
    <div>
      Возвращает элементы управления к их состоянию либо после последнего вызова [page:.saveState], либо к начальному состоянию.
    </div>

    <h3>[method:null saveState] ()</h3>
    <div>
      Сохраните текущее состояние элементов управления. Впоследствии его можно восстановить с помощью [page:.reset].
    </div>

    <h3>[method:null tween] ([param:Vector3 toPosition], [param:Vector3 toTarget], [param:Number time], [param:Function finishCb], [param:Number movementType])</h3>
    <div>
      toPosition -- Новое положение камеры. <br/>
      toTarget -- Новая целевая точка. <br/>
      time -- Длина анимации твина. <br/>
      finishCb -- Обратный вызов, который будет вызван после завершения анимации твина. <br/>
      movementType -- Интерполяция движения. Может быть
        [page:Controls v3d.TweenLinear] (default) или [page:Controls v3d.TweenSpherical]. <br/><br/>

        Изменение текущего положения камеры и целевой точки на указанное новое положение и цель плавно в течение указанного времени.
    </div>

    <h3>[method:false update] ()</h3>
    <div>
      Обновить элементы управления. Должно вызываться после любого ручного изменения трансформации камеры, или в цикле обновления, если установлены [page:.autoRotate] или [page:.enableDamping].
    </div>

    [sourceHint]
  </body>
</html>
