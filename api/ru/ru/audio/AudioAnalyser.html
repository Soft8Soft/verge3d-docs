<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <base href="../../../" />
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css" />
  </head>
  <body>
    <h1>[name]</h1>

    <p class="desc">
      Создайте объект AudioAnalyser, который использует [link:https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode AnalyserNode] для анализа аудиоданных.<br><br>

      Для этого используется [link:https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API Web Audio API].

    </p>

    <h2>Пример Кода</h2>

    <code>
    // create an AudioListener and add it to the camera
    const listener = new v3d.AudioListener();
    camera.add(listener);

    // create an Audio source
    const sound = new v3d.Audio(listener);

    // load a sound and set it as the Audio object's buffer
    const audioLoader = new v3d.AudioLoader();
    audioLoader.load('sounds/ambient.ogg', function(buffer) {
      sound.setBuffer(buffer);
      sound.setLoop(true);
      sound.setVolume(0.5);
      sound.play();
    });

    // create an AudioAnalyser, passing in the sound and desired fftSize
    const analyser = new v3d.AudioAnalyser(sound, 32);

    // get the average frequency of the sound
    const data = analyser.getAverageFrequency();
    </code>

    <h2>Примеры</h2>

    <p>
      [example:webaudio_sandbox webaudio / sandbox]<br>
      [example:webaudio_visualizer webaudio / visualizer]
    </p>

    <h2>Конструктор</h2>


    <h3>[name](audio, [link:https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/fftSize fftSize])</h3>
    <p>
      Создайте новую [page:AudioAnalyser AudioAnalyser]. 
    </p>


    <h2>Свойства</h2>

    <h3>[property:AnalyserNode analyser]</h3>
    <p>Нода [link:https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode AnalyserNode] используемая для анализа аудио.</p>

    <h3>[property:Integer fftSize]</h3>
    <p>
      Ненулевая степень двойки до 2048, представляющая размер БПФ (быстрого преобразования Фурье), которое будет использоваться для определения частотной области. 
      Подробности смотрите в  [link:https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/fftSize this page].
    </p>

    <h3>[property:Uint8Array data]</h3>
    <p>
      Uint8Array с размером, определяемым [link:https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/frequencyBinCount analyser.frequencyBinCount], используемый для хранения данных анализа.
    </p>


    <h2>Методы</h2>


    <h3>[method:Uint8Array getFrequencyData]()</h3>
    <p>
    Используется метод [link:https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/getByteFrequencyData getByteFrequencyData] веб-аудио.
    Смотрите эту страницу.
    </p>

    <h3>[method:Number getAverageFrequency]()</h3>
    <p>
      Получение среднего значения частот, возвращаемых методом [page:AudioAnalyser.getFrequencyData getFrequencyData]. 
    </p>

    [sourceHint]
  </body>
</html>
