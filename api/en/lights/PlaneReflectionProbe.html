<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body>
    [page:Object3D] &rarr;

    <h1>[name]</h1>

    <p class="desc">
      A light probe that applies planar reflections to the near objects.
    </p>


    <h2>Code Example</h2>

    <code>
    const probe = new v3d.PlaneReflectionProbe();
    probe.update(scene, camera, renderer);
    app.scene.add(probe);
    </code>


    <h2>Constructor</h2>

    <h3>[name]()</h3>
    <p>
      Creates a new [name].
    </p>


    <h2>Properties</h2>

    <p>See the base [page:Object3D Object3D] class for common properties.</p>


    <h3>[property:Float influenceDistance]</h3>
    <p>
      Controls how big is the distance of influence. Default is `1`.
    </p>

    <h3>[property:Float falloff]</h3>
    <p>
      Plane influence falloff factor. Default is `0.5`.
    </p>

    <h3>[property:Matrix4 matrixWorldInverse]</h3>
    <p>
      The inverse of [page:Object3D.matrixWorld matrixWorld].
    </p>

    <h3>[property:Float probeClipStart]</h3>
    <p>
      Objects located closer than this value won't appear on the probe's
      map. Default is `0.1`.
    </p>

    <h3>[property:WebGLRenderTarget renderTarget]</h3>
    <p>
      A [page:WebGLRenderTarget] instance containing the rendered environment map.
      Default is `null`. Updated automatically after calling the [page:.update]
      method.
    </p>

    <h3>[property:String type]</h3>
    <p>
      A string 'PlaneReflectionProbe'. This can be used to find all
      PlaneReflectionProbe objects. Shouldn't be changed.
    </p>

    <h3>[property:String visibilityGroup]</h3>
    <p>
      If not `null`, only objects from this group are rendered into the plane
      map (see also [page:Object3D.groupNames]). Default is `null`, which means no
      visibility group is used and the probe renders all scene objects.
    </p>

    <h3>[property:Boolean visibilityGroupInv]</h3>
    <p>
      If [page:.visibilityGroup] is not `null` this option (if true) makes it so
      only objects that don't belong to the specified [page:.visibilityGroup] are
      rendered into the environment map. Default is false.
    </p>


    <h2>Methods</h2>

    <p>See the base [page:Object3D Object3D] class for common methods.</p>

    <h3>[method:undefined dispose]()</h3>
    <p>
      Remove resources related to the render targets used by this object from memory.
    </p>

    <h3>[method:Boolean intersectsMesh]([param:Mesh mesh])</h3>
    <p class="params">
      mesh — a [page:Mesh] object to test intersections with.
    </p>
    <p>
      Check if there's any intersection between the probe's influence volume
      (see [page:.influenceDistance] and [page:.influenceType]) and the given
      mesh object. Returns the checking result. Exact calculations depend on
      [page:.influenceType], for example for [page:Lights v3d.ReflectionProbeTypeInfinite]
      the method always returns `true`.
    </p>

    <h3>[method:undefined setSize]([param:Integer size])</h3>
    <p class="params">
      size — new map size.
    </p>
    <p>
      Set the plane map size.
    </p>

    <h3>[method:undefined update]([param:Scene scene], [param:Camera camera], [param:WebGLRenderer renderer])</h3>
    <p class="params">
      scene — a scene to render.<br/>
      scene — a camera to render.<br/>
      renderer — a [page:WebGLRenderer] instance.
    </p>
    <p>
      Render the given scene into the probe's map. The rendering
      result will be in the [page:.renderTarget] property.
    </p>

    [sourceHint]

  </body>
</html>
