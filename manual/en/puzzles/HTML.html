<!DOCTYPE html>
<html lang="en">
  <head>
    <title>HTML Puzzles Reference - Soft8Soft</title>
    <meta charset="utf-8">
    <meta name="description" content="How to use Verge3D Puzzles to manipulate HTML DOM elements."/>
    <base href="../../../" />
    <script src="list.js"></script>
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css" />
  </head>
  <body><article>
    <h1>HTML Puzzles</h1>

    <p>These puzzles manipulate HTML DOM elements.</p>

    <img src="files/puzzles/puzzles-html.jpg">

    <h2>Contents</h2>

    [contents]


    [anchor:puzzles_reference]

    <h2>Puzzles Reference</h2>


    [anchor:add_HTML_element]

    <h3>add HTML element</h3>

    <p>
      Creates an HTML element with a specified <a href="https://www.w3schools.com/tags/default.asp" target="_blank">type</a>
      and identifier (corresponds to "id" attribute) and adds it to, right before
      or right after the specified existing HTML element.
    </p>

    <img src="files/puzzles/puzzles-html-add-html-elem.jpg">


    <p>
    *Notes*:
    </p>

    <p>
    Besides creating an HTML element, this puzzle also sets its CSS property *position* to "absolute". If you don't need this thing, you can set this CSS property to "initial" with a <a href="manual/en/puzzles/HTML.html#set_style">set style</a> puzzle.
    </p>



    [anchor:get_attribute]

    <h3>get attribute</h3>

    <p>
    Gets an <a href="https://www.w3schools.com/tags/ref_attributes.asp" target="_blank">attribute</a> from an HTML element with a specified id. The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document (in which Verge3D application's <strong>.html</strong> file is embedded using <strong>iframe</strong>).
    </p>

    <img src="files/puzzles/puzzles-html-get-attr.jpg">



    [anchor:set_attribute]

    <h3>set attribute</h3>

    <p>
    Sets an <a href="https://www.w3schools.com/tags/ref_attributes.asp" target="_blank">attribute</a> for an HTML element with a specified id. The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document (in which Verge3D application's <strong>.html</strong> file is embedded using <strong>iframe</strong>). Also works with lists of element ids.
    </p>

    <img src="files/puzzles/puzzles-html-set-attr.jpg">



    [anchor:set_style]

    <h3>set style</h3>

    <p>
    Sets a <a href="https://www.w3schools.com/cssref/default.asp" target="_blank">CSS property</a> for an HTML element with a specified id. The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document (in which Verge3D application's <strong>.html</strong> file is embedded using <strong>iframe</strong>). Also works with lists of element ids.
    </p>

    <img src="files/puzzles/puzzles-html-set-style.jpg">



    [anchor:set_css_rule]

    <h3>set css rule</h3>

    <p>
    Sets a <a href="https://www.w3schools.com/cssref/default.asp" target="_blank">CSS property</a> for a specified CSS rule (found in <strong>.css</strong> files of an application). The "in parent doc" checkbox should be enabled if the style sheets belong to an external HTML document (in which Verge3D application's <strong>.html</strong> file is embedded using <strong>iframe</strong>).
    </p>

    <img src="files/puzzles/puzzles-html-set-css-rule.jpg">



    [anchor:event]

    <h3>event</h3>

    <p>
    Registers an <a href="https://www.w3schools.com/jsref/dom_obj_event.asp" target="_blank">event listener</a> for an HTML element with a specified id. The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document (in which Verge3D application's <strong>.html</strong> file is embedded using <strong>iframe</strong>). Once an event occurs, the puzzles placed in the "do" slot are triggered. Also works with lists of element ids.
    </p>

    <img src="files/puzzles/puzzles-html-on-event.jpg">



    [anchor:get_event_property]

    <h3>get event property</h3>

    <p>
    Outputs the value of a <a href="https://www.w3schools.com/jsref/obj_events.asp" target="_blank">property</a> of an event generated by the "event" puzzle.
    </p>

    <img src="files/puzzles/puzzles-html-get-event-property.jpg">


    [anchor:DOM_object_selector]

    <!--COMPAT-->
    <p><a href="manual/en/puzzles/HTML.html#window" id="window" class="permalink"></a></p>
    <p><a href="manual/en/puzzles/HTML.html#document" id="document" class="permalink"></a></p>
    <p><a href="manual/en/puzzles/HTML.html#body" id="body" class="permalink"></a></p>

    <h3>DOM object selector</h3>

    <p>
    Represents the canvas container element - an HTML element which contains a rendered scene, <a href="https://www.w3schools.com/jsref/obj_window.asp" target="_blank">DOM window object</a> - a browser tab or an iframe to which an HTML document is loaded, <a href="https://www.w3schools.com/jsref/dom_obj_document.asp" target="_blank">DOM document object</a> - the root node of an HTML document, or <a href="https://www.w3schools.com/jsref/dom_obj_body.asp" target="_blank">DOM body object</a> - the &lt;body&gt; element of an HTML document.
    </p>

    <img src="files/puzzles/puzzles-html-DOM-object-selector.jpg">


    [anchor:query_selector]

    <h3>query selector</h3>

    <p>Returns the first HTML element that matches a specified <a href="https://www.w3schools.com/cssref/css_selectors.asp" target="_blank">CSS selector</a>.</p>

    <img src="files/puzzles/puzzles-html-query-selector.jpg">


    [anchor:create_canvas_elem]

    <h3>create canvas elem</h3>

    <p>Creates a canvas element with *id*, *width*, and *height* attributes. Use this puzzle with <a href="manual/en/puzzles/Materials.html#replace_texture">replace texture</a> to create canvas textures.</p>

    <img src="files/puzzles/puzzles-html-create-canvas-elem.jpg">

    <p>Once created, the canvas becomes available for drawing on it via JavaScript. You can update the canvas inside the runCode() function of your_app_name.js module. To do this, retrieve the canvas texture by its ID specified in the puzzle:</p>

    <code>
    var canvasTex = v3d.puzzles.canvasTextures['my_canvas'];
    </code>

    <p>After that, you can access the HTML canvas element as follows:</p>

    <code>
    var canvas = canvasTex.image;
    </code>

    <p>You can use the standard methods available for drawing on the HTML canvas. For example, the following listing draws a blue smiling face on white background:</p>

    <code>
    var ctx = canvas.getContext("2d");

    ctx.fillStyle = 'white';
    ctx.strokeStyle = 'blue';

    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.beginPath();
    ctx.arc(75, 75, 50, 0, Math.PI * 2, true); // Outer circle
    ctx.moveTo(110, 75);
    ctx.arc(75, 75, 35, 0, Math.PI, false);  // Mouth (clockwise)
    ctx.moveTo(65, 65);
    ctx.arc(60, 65, 5, 0, Math.PI * 2, true);  // Left eye
    ctx.moveTo(95, 65);
    ctx.arc(90, 65, 5, 0, Math.PI * 2, true);  // Right eye
    ctx.stroke();

    </code>

    <p>Finally, if youâ€™d like the updates to become immediately visible in the 3D rendering, you should mark the canvas texture as dynamic:</p>

    <code>
    canvasTex.needsUpdate = true;
    </code>


    [anchor:draw_line]

    <h3>draw line</h3>

    <p>
    Connects a specified 3D object with a specified HTML element by a dynamically updated line. The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document (in which Verge3D application's <strong>.html</strong> file is embedded using <strong>iframe</strong>). You can also set the width, color and offset for the line.
    </p>

    <img src="files/puzzles/puzzles-html-draw-line.jpg">



    [anchor:remove_line]

    <h3>remove line</h3>

    <p>
    Removes a previously created line from a specified object.
    </p>

    <img src="files/puzzles/puzzles-html-remove-line.jpg">



    [anchor:bind_element]

    <h3>bind element</h3>

    <p>
    Makes a specified HTML element follow the center of a specified 3D object in screen space. The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document (in which Verge3D application's <strong>.html</strong> file is embedded using <strong>iframe</strong>).
    </p>

    <img src="files/puzzles/puzzles-html-bind-element.jpg">

    <p>
    *Notes*:
    </p>

    <p>
    You can use the <a href="manual/en/puzzles/Objects.html#add_annotation">add annotation</a> puzzle instead and customize the look of the annotations as described <a href="manual/en/introduction/Styling-Verge3D-Apps.html#Annotations" target="_parent">here</a>.
    </p>



    [anchor:init_fullscreen]

    <h3>init fullscreen</h3>

    <p>
    Makes a specified HTML element behave as a fullscreen mode button - the first click on it triggers entering the fullscreen mode, the second click exits fullscreen. Puzzles placed in the "on enter do" and "on exit do" slots are triggered upon entering or exiting the fullscreen mode. Puzzles placed in the "if unavailable do" are triggered if fullscreen is not supported by the browser (e.g. iOS Safari).
    </p>

    <img src="files/puzzles/puzzles-html-init-fullscreen.jpg">


    [anchor:open_web_page]

    <h3>open web page</h3>

    <p>
    When this puzzle is triggered, a specified URL is opened in a new or in the same browser tab depending on the drop-down selection. When triggered from the Puzzles editor, it will ask for a user confirmation before leaving the tab.
    </p>

    <img src="files/puzzles/puzzles-html-open-web-page.jpg">



    [anchor:social_share_link]

    <h3>social share link</h3>

    <p>
    Generates a link for sharing your application in popular social media.
    </p>

    <img src="files/puzzles/puzzles-html-social-share-link.jpg">


    [anchor:set_url_param]

    <h3>set URL param</h3>

    <p>
    Assigns or updates a value of a parameter in a specified URL by automatically forming a valid <a href="https://en.wikipedia.org/wiki/Query_string" target="_blank">query string</a> if necessary, and returns the updated URL.
    </p>

    <img src="files/puzzles/puzzles-html-set-url-param.jpg">

    <p>
    This puzzle may be useful in situations when the configuration data of an application are stored in its URL. For example, you can specify an image to be used as a texture in the following way:
    </p>

    <pre class="prettyprint"><code class="language-html">
    https://www.example.com/my_awesome_app.html?image_url=https://www.uploadserver.com/path/to/image.jpg
    </code></pre>

    <p>
    You can upload a texture, retrieve its server-side path and save it to the *image_url* parameter of the app URL as follows:
    </p>

    <img src="files/puzzles/puzzles-html-set-url-param-example.jpg">

    <p>
    See the *Custom Image* demo in your Verge3D distribution for a working example.
    </p>



    [anchor:take_screenshot]

    <h3>take screenshot</h3>

    <p>
    Takes a screenshot of the viewport and outputs it in <a href="https://en.wikipedia.org/wiki/Data_URI_scheme#Examples_of_use" target="_blank">Data URI</a> format.
    </p>

    <img src="files/puzzles/puzzles-html-take-screenshot.jpg">

    <p>
    *Notes*:
    </p>

    <p>
    You should also enable screenshots for your app using the <a href="manual/en/puzzles/Initialization.html#configure_application">configure application</a> puzzle, otherwise black images will be produced.
    </p>





    [anchor:get_url_data]

    <h3>get URL data</h3>

    <p>
    Retrieves URL data of the window to which an application is loaded:
    </p>

    <p>
    <ul>
    <li>
    *Entire URL* - text, e.g. "https://www.example.com/my_awesome_app.html?image_url=https://www.uploadserver.com/path/to/image.jpg"
    </li>
    <li>
    *Parameters* - dictionary, e.g. {"image_url": "https://www.uploadserver.com/path/to/image.jpg"}
    </li>
    <li>
    *Host name* - text, e.g. "www.example.com"
    </li>
    </ul>
    The "in parent doc" checkbox should be enabled if the window of an external HTML document is required (in which Verge3D application's <strong>.html</strong> file is embedded using <strong>iframe</strong>).
    </p>

    <img src="files/puzzles/puzzles-html-get-url-data.jpg">

    <p>
    This puzzle may be useful in situations when the configuration data of an application are stored in its URL. For example, you can specify an image to be used as a texture in the following way:
    </p>

    <pre class="prettyprint"><code class="language-html">
    https://www.example.com/my_awesome_app.html?image_url=https://www.uploadserver.com/path/to/image.jpg
    </code></pre>

    <p>
    Then you can retrieve the *image_url* parameter, load and apply the texture as follows:
    </p>

    <img src="files/puzzles/puzzles-html-get-url-data-example.jpg">

    <p>
    See the *Custom Image* demo in your Verge3D distribution for a working example.
    </p>




    [anchor:download_file]

    <h3>download file</h3>

    <p>
    Downloads content specified in <a href="https://en.wikipedia.org/wiki/Data_URI_scheme#Examples_of_use" target="_blank">Data URI</a> format to a file.
    </p>

    <img src="files/puzzles/puzzles-html-download-file.jpg">

    <p>
    This puzzle can be used, for example, to save previously taken screenshots, or to save some information in a text file:
    </p>

    <img src="files/puzzles/puzzles-html-download-file-example.jpg">



    [anchor:open_file]

    <h3>open file and "opened file"</h3>

    <p>
    Invokes the browser's native dialog window for selecting files from the user's device. Once the user have selected a file, returns the file's contents in <a href="https://en.wikipedia.org/wiki/Data_URI_scheme#Examples_of_use" target="_blank">Data URI</a> format.
    </p>

    <img src="files/puzzles/puzzles-html-open-file.jpg">


    <h2>Having Troubles with Puzzles?</h2>

    <p>Seek help on the <a href="https://www.soft8soft.com/forums/" target="_blank">forums</a>!</p>

  </article></body>
</html>
