<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Materials Puzzles Reference â€” Soft8Soft</title>
    <meta charset="utf-8">
    <meta name="description" content="How to manage materials and textures with Verge3D Puzzles."/>
    <base href="../../../" />
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css" />
  </head>
  <body><article>

    <h1>Materials</h1>

    <p>
    The puzzles from this category perform various operations with materials and textures.
    </p>

    <img src="files/puzzles/puzzles-materials.jpg" alt="Materials visual programming blocks">

    <h2>Contents</h2>

    [contents]


    [anchor:puzzles_reference]

    <h2>Puzzles Reference</h2>


    [anchor:assign_material]

    <h3>assign material</h3>

    <p>
      Assigns a material to an object, completely replacing the old material. Also works for a list of objects, a group (or a list of groups) or with the <a href="manual/en/puzzles/Selectors.html#all_objects">all objects</a> puzzle.
    </p>

    <img src="files/puzzles/puzzles-materials-assign-material.webp" alt="Visual programming block to assign material">

    <p>
      This puzzle requires a material which must be assigned to some existing model (can be hidden), kinda a swatch card:
    </p>

    <img src="files/puzzles/puzzles-materials-assign-material-example.webp" alt="Assigning material in configurator">

    <p>
      Also, the source and destination meshes should have the same layout for UVs and color attributes, e.g in Blender:
    </p>

    <img src="files/puzzles/puzzles-materials-assign-material-uvs.webp" alt="UVs in Blender" style="max-width: 565px;">

    <p>
      In some situations, namely when a normal-mapped material is assigned to an object without normal mapping, this puzzle might render your material completely black. If this happens, <em>disable</em> mesh attributes optimization in the export settings:
    </p>

    <v3d-tabs>
      <label>Blender</label>
      <div>
        <img src="files/puzzles/mesh-attributes-not-optimize-blender.jpg" alt="Disabling geometry optimization in Blender" style="max-width: 331px;">
      </div>
      <label>3ds Max</label>
      <div>
        <img src="files/puzzles/mesh-attributes-not-optimize-max.jpg" alt="Disabling geometry optimization in 3ds Max" style="max-width: 252px;">
      </div>
      <label>Maya</label>
      <div>
        <img src="files/puzzles/mesh-attributes-not-optimize-maya.jpg" alt="Disabling geometry optimization in Maya" style="max-width: 416px;">
      </div>
    </v3d-tabs>


    [anchor:replace_texture]

    <h3>replace texture</h3>

    <p>Replaces a texture found for a specified material with the one loaded from the provided image URI, <a href="manual/en/puzzles/Sound.html#load_video">video asset</a>, or <a href="manual/en/puzzles/HTML.html#create_canvas_elem">canvas</a>.</p>

    <img src="files/puzzles/puzzles-materials-replace-texture.jpg" alt="Visual programming block to replace textures">

    <p>
      Puzzle options:
    </p>

    <dl>
      <dt>enable "once ready do" slot</dt>
      <dd>Show/hide the slot for puzzles which will be executed right after the texture is done loading.</dd>

      <dt>flexible texture input</dt>
      <dd>Allow using <a href="manual/en/puzzles/Text.html#text">text puzzles</a> inside the "texture" input instead of the default dropdown selector.</dd>
    </dl>

    [demo:custom_image]

    <p class="note">
      To use transparent videos, encode your content in WebM or HEVC format and set the material type to *Blend* (see: transparency in
      <a href="manual/en/blender/Transparency.html#setting_up_in_blender">Blender</a> /
      <a href="manual/en/max/Transparency.html#blended_vs_masked">Max</a> /
      <a href="manual/en/maya/Transparency.html#blended_vs_masked">Maya</a>).
    </p>


    [anchor:get_texture_param]

    <h3>get texture param</h3>

    <p>
    Retrieves the following parameters for a texture found for a specified material: width, height, aspect or dimensions.
    </p>

    <img src="files/puzzles/puzzles-materials-get-texture-param.jpg" alt="Visual programming block to get texture param">


    [anchor:materials_set_color]

    <h3>set color</h3>

    <p>
    Set R, G and B components of a color parameter found for a specified material.
    </p>

    <img src="files/puzzles/puzzles-materials-set-color.jpg" alt="Visual programming block to set material color">

    <v3d-tabs>
      <label>Blender</label>
      <div>
        <p>
          You can add *RGB* nodes in your node-based materials and their names will be shown in the dropdown menu. In addition, *Base Color* (or *Color*) inputs for BSDF Principled, BSDF Diffuse and BSDF Glossy nodes are also accessible.
        </p>

        <img src="files/puzzles/puzzles-materials-set-color-example-blender.jpg" alt="Blender material with customizable color" style="max-width: 643px;">

        <p>
          In case of <em>glTF-compliant PBR materials</em>, the <strong>BaseColor</strong> and <strong>Emissive</strong> inputs are only accessible with this puzzle.
        </p>
      </div>
      <label>3ds Max</label>
      <div>
        <p>
          You can add <strong>Controllers</strong> in your materials (standard or physical) and their names will be shown in the dropdown menu. In addition, *Diffuse* (or *Base Color*) color inputs for standard or physical material nodes are also accessible.
        </p>

        <img src="files/puzzles/puzzles-materials-set-color-example-max.jpg" alt="3ds Max material with customizable color" style="max-width: 759px;">

        <p>
          In case of <em>glTF-compliant PBR</em> materials, the <strong>Base Color</strong> and <strong>Emission</strong> inputs are only accessible with this puzzle.
        </p>
      </div>
      <label>Maya</label>
      <div>
        <p>
          You can add <strong>Color Constant</strong> nodes in your materials and their names will be shown in the dropdown menu.
        </p>

        <img src="files/puzzles/puzzles-materials-set-color-example-maya.jpg" alt="Maya material with customizable color" style="max-width: 936px;">

        <p>
          In case of <em>glTF-compliant PBR</em> materials, the <strong>color</strong> and <strong>emissive</strong> inputs are only accessible with this puzzle.
        </p>
      </div>
    </v3d-tabs>

    <p>
    This puzzle can also be used to modify the environment shader. In the drop-down, the name of the environment shader starts with "Verge3D_Environment".
    </p>

    <p>
      For more information on materials available to Verge3D users, please refer to Material system overview chapters of this manual: <a href="manual/en/blender/Material-System.html" target="_blank">Blender</a>, <a href="manual/en/max/Material-System.html" target="_blank">3ds Max</a>, <a href="manual/en/maya/Materials.html" target="_blank">Maya</a>.
    </p>


    [anchor:materials_get_color]

    <h3>get color</h3>

    <p>Get color parameter found for a specified material:</p>

    <ul>
      <li>*red* - red color component.</li>
      <li>*green* - green color component.</li>
      <li>*blue* - blue color component.</li>
      <li>*rgb* - RGB color components as vector/list value.</li>
      <li>*css (hex)* - CSS style string, such as #AA00FF.</li>
      <li>*css (rgb)* - CSS style string, such as rgb(127, 0, 255).</li>
    </ul>

    <p>Specify *flexible color input* parameter to assign custom material parameter as string value.</p>

    <img src="files/puzzles/puzzles-materials-get-color.jpg" alt="Visual programming block to get material color">



    [anchor:materials_set_value]

    <h3>set value</h3>

    <p>Set a value parameter found for a specified material.</p>

    <img src="files/puzzles/puzzles-materials-set-value.jpg" alt="Visual programming block to set material value">

    <v3d-tabs>
      <label>Blender</label>
      <div>
        <p>
          You can add <strong>Value</strong> nodes in your node-based materials and their names will be shown in the dropdown menu.
        </p>

        <img src="files/puzzles/puzzles-materials-set-value-example-blender.jpg" alt="Blender material with customizable value" style="max-width: 687px;">

        <p>
          In case of <em>glTF-compliant PBR</em> materials, the following inputs are accessible with this puzzle: *metalness*, *roughness*, *bumpScale*, *emissiveIntesity*, and *envMapIntensity*.
        </p>
      </div>
      <label>3ds Max</label>
      <div>
        <p>
          You can add *Controllers* in your materials (standard or physical) and their names will be shown in the dropdown menu.
        </p>

        <img src="files/puzzles/puzzles-materials-set-value-example-max.jpg" alt="3ds Max with customizable value" style="max-width: 739px;">

        <p>
          In case of <em>glTF-compliant PBR</em> materials the following inputs are accessible with this puzzle: *Metalness*, *Roughness*, *Bump Scale*, *Emissive Intensity* and *Environment Map Intensity*.
        </p>
      </div>
      <label>Maya</label>
      <div>
        <p>
          You can add *Float Constant* nodes in your material and their names will be shown in the dropdown menu.
        </p>

        <img src="files/puzzles/puzzles-materials-set-value-example-maya.jpg" alt="Maya material with customizable value" style="max-width: 769px;">

        <p>
          In case of <em>glTF-compliant PBR</em> materials, the following inputs are accessible with this puzzle: *metalness*, *roughness*, *bumpScale*, *emissiveIntensity* and *envMapIntensity*.
        </p>
      </div>
    </v3d-tabs>

    <p>
    This puzzle can also be used to modify the environment shader. In the drop-down, the name of the environment shader starts with "Verge3D_Environment".
    </p>

    <p>
      For more information on materials available to Verge3D users, please refer to Material system overview chapters of this manual: <a href="manual/en/blender/Material-System.html" target="_blank">Blender</a>, <a href="manual/en/max/Material-System.html" target="_blank">3ds Max</a>, <a href="manual/en/maya/Materials.html" target="_blank">Maya</a>.
    </p>

    [anchor:materials_get_value]

    <h3>get value</h3>

    <p>
      Get a value parameter found for a specified material. Specify *flexible value input* parameter to assign custom material parameter as string value.
    </p>

    <img src="files/puzzles/puzzles-materials-get-value.jpg" alt="Visual programming block to get material value" style="max-width: 727px">


    [anchor:get_material]

    <h3>get material</h3>

    <p>
    Retrieves the name of a material assigned to an object. If multiple materials are assigned to the same object, returns the first one.
    </p>

    <img src="files/puzzles/puzzles-object-get-material.jpg" alt="Visual programming block to get object material">



    [anchor:texture_from_text]

    <h3>texture from text</h3>

    <p>
      Creates an image from specified text and returns it in <a href="manual/en/puzzles/HTML.html#data_url">Data URL</a> format.
    </p>

    <img src="files/puzzles/puzzles-materials-texture-from-text.jpg" alt="Texture from text visual programming block">

    <h4>Parameters:</h4>

    <dl>
      <dt>text</dt>
      <dd>
        input text.
      </dd>
      <dt>
        width, height
      </dt>
      <dd>
        dimensions of the generated image (in pixels). Power-of-two values are recommended (256, 512, 1024 etc).
      </dd>
      <dt>font family</dt>
      <dd>
        <a href="https://www.w3schools.com/cssref/pr_font_font-family.asp" target="_blank">font-family</a> CSS property to render the text with. You can use system fonts such as "Arial" or custom fonts loaded with the <a href="manual/en/puzzles/Initialization.html#load_font">load font</a> puzzle.
      </dd>
      <dt>size</dt>
      <dd>
        size of the text drawn on the generated image (in pixels).
      </dd>
      <dt>horizontal align</dt>
      <dd>
        how the text is horizontally aligned on the generated image: *center*, *left*, *right*.
      </dd>
      <dt>vertical align</dt>
      <dd>
        how the text is vertically aligned on the generated image: *middle*, *top*, *bottom*.
      </dd>
      <dt>line height</dt>
      <dd>
        line height of the text (in pixels). If set to *0*, it is auto-detected.
      </dd>
      <dt>justify</dt>
      <dd>
        justify the text if enabled, inserts spaces between words when necessary.
      </dd>
    </dl>

    <h4>Box parameters (activated via "gear" icon):</h4>

    <p>
      When activated, the text rendered inside a box container the size and position of which can be tweaked using the following parameters:
    </p>

    <dl>
      <dt>box x</dt>
      <dd>
        Box left edge (in pixels).
      </dd>
      <dt>box y</dt>
      <dd>
        Box top edge (in pixels).
      </dd>
      </dd>
      <dt>width</dt>
      <dd>
        Box width (in pixels).
      </dd>
      <dt>height</dt>
      <dd>
        Box height (in pixels).
      </dd>
    </dl>

    <h4>Color parameters (activated via "gear" icon):</h4>

    <dl>
      <dt>text color</dt>
      <dd>
        the color of the text.
      </dd>
      <dt>background color</dt>
      <dd>
        the color of the background.
      </dd>
    </dl>

    <p>
      In the example below, the image generated from text is used on a model via the <a href="manual/en/puzzles/Materials.html#replace_texture">replace texture</a> puzzle:
    </p>

    <img src="files/puzzles/puzzles-materials-texture-from-text-example.jpg" alt="Creating texture from text with visual logic blocks">


    [anchor:color_picker]

    <h3>color picker</h3>

    <p>
      Return selected color as CSS value.
    </p>

    <img src="files/puzzles/puzzles-materials-color-picker.jpg" alt="Color picker visual programming block">


    [anchor:compose_color]

    <h3>compose color</h3>

    <p>
      Compose color from linear RGB (or RGBA with alpha input enabled) components and return it as CSS value.
    </p>

    <img src="files/puzzles/puzzles-materials-compose-color.jpg" alt="Compose color visual programming block">


    [anchor:generate_normal_map]

    <h3>generate normal map</h3>

    <p>
      Converts an image to normal map and returns it in <a href="manual/en/puzzles/HTML.html#data_url">Data URL</a> format.
    </p>

    <img src="files/puzzles/puzzles-materials-generate-normalmap.jpg" alt="Visual logic block to generate normal maps">

    <p>
    Parameters:
    </p>

    <dl>
      <dt>(source image)</dt>
      <dd>
        image URL, usually black and white height map. Also images in <a href="manual/en/puzzles/HTML.html#data_url">Data URL</a> format can be supplied such as the output of the <a href="manual/en/puzzles/Materials.html#texture_from_text">texture from text</a> puzzle.
      </dd>
      <dt>strength</dt>
      <dd>linear factor affecting the height. Recommended values: 0.01 to 5.</dd>
      <dt>level</dt>
      <dd>exponential factor affecting the height. Recommended values: 4 to 10.</dd>
      <dt>blur / sharp</dt>
      <dd>blurriness/sharpness factor in the Gaussian filter. Recommended values: -10 (blur) to 10 (sharp).</dd>
      <dt>filter</dt>
      <dd>selector between Sobel or Scharr algorithms used for edge detection.</dd>
      <dt>invert R</dt>
      <dd>
        invert direction in the normal map's R channel. At the moment this must be disabled for Blender, 3ds Max, and Maya but may require enabling for some other tool supported in the future.
      </dd>
      <dt>invert G</dt>
      <dd>
        invert direction in the normal map's G channel. Must be enabled for compatibility with 3ds Maxâ€™ normal map space but left disabled for Blender/Maya.
      </dd>
      <dt>invert height</dt>
      <dd>change interpretation of height to make darker pixels correspond to lower height.</dd>
    </dl>

    <p>
    In the example below, the normal map generated from a loaded image is used on a model via the <a href="manual/en/puzzles/Materials.html#replace_texture">replace texture</a> puzzle:
    </p>

    <img src="files/puzzles/puzzles-materials-generate-normalmap-example.jpg" alt="Generating normal maps with logic blocks" style="max-width: 819px">


    [anchor:enable_disable_wireframe]

    <h3>enable/disable wireframe</h3>

    <p>
      Enable or disable wireframe rendering for a specified material. Can be used as a non-photorealistic rendering technique, for debugging, or performance optimization.
    </p>

    <img src="files/puzzles/puzzles-materials-enable-disable-wireframe.jpg" alt="Enable wireframe rendering with visual programming">


    <h2>Having Troubles with Puzzles?</h2>

    <p>Seek help on the <a href="https://www.soft8soft.com/forums/" target="_blank">forums</a>!</p>


  </article></body>
</html>
