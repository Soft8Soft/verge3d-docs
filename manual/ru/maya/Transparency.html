<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Вердж3Д для Майи: Прозрачность — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Узнайте, какие виды прозрачности можно включить для материалов Майя и использовать в Вердж3Д.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body><article>

    <h1>Прозрачность / Майя</h1>

    <p>
      Здесь мы покажем, как включить прозрачность для Standard Surface, Lambert и glTF-совместимых PBR материалов в «Майе».
    </p>

    [demo:transparency Прозрачность]


    [contents]


    [anchor:blended_vs_masked]

    <h2>Альфа-блендинг и альфа-клиппинг</h2>

    <p>
      «Вердж3Д», являясь 3Д-движком, работающим в реальном времени, предлагает два метода работы с прозрачными объектами: альфа-блендинг и альфа-клиппинг (обычно с изображением-маской). Альфа-блендинг позволяет комбинировать полупрозрачный цвет переднего плана с цветом фона, используя альфа-канал в качестве фактора смешивания. Альфа-клиппинг действует по принципу отбрасывания всех пикселей альфа-канала меньше заданного порога (в «Вердж3Д для Майи» он всегда равен 0,5).
    </p>

    <img src="files/transparency-common/blending-vs-clipping.jpg">

    <p>
      Альфа-блендинг менее производителен, чем альфа-клиппинг, но обеспечивает мягкие переходы, которые выглядят красивее. Альфа-блендинг также может вызывать артефакты связанные с Z-файтингом, когда полигоны визуализируются в неправильном порядке. Альфа-клиппинг создает жёсткие края, которые не могут быть сглажены, поэтому лучше всего подходит для визуализации многочисленных небольших предметов (таких как трава или листья деревьев).
    </p>

    <p>
      Используйте выпадающий список *Alpha Mode* в настройках материала, чтобы выбрать между смешиванием и клиппингом.
    </p>

    <img src="files/transparency-maya/alpha-mode.jpg" style="max-width: 480px">

    <p>
      Также имеется вариация метода *Mask*, называемая *Coverage*. Она использует MSAA-рендеринг для улучшения качества рендеринга клиппинг-прозрачности.
    </p>


    [anchor:alpha_add]

    <h2>Аддитивный композитинг (рендеринг без буфера глубины)</h2>

    <p>
      «Вердж3Д» также предлагает специальный режим, для отключения буфера глубины во время рендеринга. Это приводит к отмене сравнения значений глубины пикселей перекрываемых полигонов. Такие полигоны будут визуализированы аддитивным способом, который иногда позволяет избавиться от артефактов альфа-смешения.
    </p>

    <img src="files/transparency-common/no-depth-writes.jpg">

    <p>
      Выберите *Blend* в выпадающем списке *Alpha Mode* и снимите флажок *Depth Write* в настройках материала, чтобы включить этот режим. Кроме того, вам нужно увеличить значение *Rendering Order* в параметрах <a href="manual/ru/maya/Lighting-and-Rendering.html#per_object_rendering_settings">объекта</a> чтобы ваш прозрачный объект отрендерился первым.
    </p>


    [anchor:oit_rendering]

    <h2>Порядконезависимая прозрачность (OIT)</h2>

    <p>
      «Вердж3Д» позволяет использовать метод приближенной порядконезависимой прозрачности, который не требует рендеринга геометрии в отсортированном порядке, поэтому он избавляет от большинства артефактов альфа-смешения, без использования вышеперечисленных приёмов.
    </p>

    <img src="files/transparency-common/oit-example.jpg" alt="Пример порядконезависимой прозрачности">

    <p>
      Данную опцию можно активировать в панели настроек <a href="manual/ru/maya/Lighting-and-Rendering.html#global_rendering_settings">Verge3D Settings</a>.
    </p>

    <img src="files/transparency-maya/oit.jpg" alt="Настройки Order-Independent Transparency в Майя" style="max-width: 631px;">

    <p>Ограничения:</p>

    <ul>
      <li>
        OIT опция совместима только с WebGL 2, в противном случае эффекта не будет.
      </li>
      <li>
        OIT игнорируется зондами освещения <a href="manual/ru/maya/Lighting-and-Rendering.html#light_probes">в виде отражающих кубических текстур</a> и <a href="manual/ru/maya/Lighting-and-Rendering.html#reflection_plane_light_probes">в виде планарных отражений</a>.
      </li>
      <li>
        Может плохо работать с объектами с высокой непрозрачностью.
      </li>
      <li>
        Не следует использовать вместе с *MSAA* (мультисемпловое сглаживание) в сценах с 2 и более непрозрачными объектами. Вместо этого вы можете использовать *FXAA* (быстрое приближенное сглаживание), которое полностью совместимо с OIT.
      </li>
    </ul>


    [anchor:standard_surface_materials]

    <h2>Прозрачность Standard Surface материалов</h2>

    <p>
      Прозрачность Standard Surface (или aiStandardSurface) материалов может быть настроена с помощью следующих параметров:
    </p>

    <img src="files/transparency-maya/standard-surface-transparency.jpg" style="max-width: 422px">

    <p>Параметры:</p>

    <dl>
      <dt>Transmission Weight</dt>
      <dd>Коэффициент пропускания тонкостенных и преломляющих материалов.</dd>

      <dt>Transmission Color</dt>
      <dd>Цвет преломления (*Thin Walled* отключен) материала.</dd>

      <dt>Thin Walled</dt>
      <dd>Использовать общие тонкостенные или основанные на преломлении прозрачности.</dd>

      <dt>Opacity</dt>
      <dd>Коэффициент непрозрачности для тонкостенных материалов.</dd>

      <dt>Alpha Mode</dt>
      <dd>Режим прозрачности материала.</dd>

      <dt>Depth Write</dt>
      <dd>Отключение для аддитивного составления прозрачности (смотрите <a href="manual/ru/maya/Transparency.html#alpha_add">выше</a>).</dd>
    </dl>

    <p class="note">
      По умолчанию в «Майе» параметр *Thin Walled* не отмечен, что отключает наиболее типичный рендеринг прозрачности, который вы ожидали увидеть в интерактивном приложении. Всегда следите за этим параметром, когда имеете дело с прозрачными материалами Standard Surface.
    </p>


    [anchor:gltf_materials]

    <h2>Прозрачность glTF-совместимых PBR-материалов</h2>

    <p>
      Чтобы включить прозрачность для таких материалов, необходимо запечь карту прозрачности как 4 (альфа) компонент текстуры базового цвета и подключить *Alpha* выход этой текстуры к *Opacity* входу материала Standard Surface.
    </p>

    <img src="files/transparency-maya/gltf-compat-transparency.jpg">

    <p>
      Если текстура базового цвета недоступна, просто используйте неподключенный параметр *Opacity*.
    </a>

    <p>
      Используйте выпадающий список *Alpha Mode* для выбора режима прозрачности.
    </p>

    <h2>Остались вопросы?</h2>

    <p>Задайте их на нашем <a href="https://www.soft8soft.com/ru/форумы/" target="_blank">форуме</a>!</p>

  </article></body>
</html>
