<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Пазлы виртуальной и дополненной реальности — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Как включить и использовать режимы дополненной реальности и виртуальной реальности в пазлах.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body><article>

    <h1>Пазлы виртуальной и дополненной реальности</h1>

    <p>
      Эти пазлы используются для создания приложений дополненной реальности (ДР) и виртуальной реальности (ВР), работающих с использованием технологии WebXR.
    </p>

    <img src="files/puzzles/puzzles-ar-vr.jpg">

    <p>
      Для получения дополнительной информации о поддерживаемых устройствах виртуальной реальности и работе с данными пазлами смотрите <a href="manual/ru/introduction/AR-VR-development.html">соответствующий раздел</a> данного руководства пользователя.
    </p>

    <h2>Содержание</h2>

    [contents]


    [anchor:puzzles_reference]

    <h2>Перечень пазлов</h2>

    [anchor:check_vr_mode]

    <h3>check VR mode</h3>

    <p>
      Проверяет наличие системы виртуальной реальности. В случае успеха запускаются пазлы в слоте *if available do*. В противном случае, если браузер не поддерживает ВР или оборудование не найдено, запускаются пазлы в слоте *if unavailable do*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-check-vr-mode.jpg">

    <p>
      Для получения дополнительной информации по созданию приложений виртуальной реальности обратитесь к <a href="manual/ru/introduction/AR-VR-development.html#virtual_reality">соответствующему разделу</a>.
    </p>


    [anchor:enter_vr_mode]

    <h3>enter VR mode</h3>

    <p>
      Активирует режим виртуальной реальности. Пазлы, размещенные в слотах *on enter do* и *on exit do*, срабатывают при входе или выходе из режима ВР. Пазлы, размещенные в слоте *if unavailable do*, срабатывают, если сеанс ВР не доступен.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-enter-vr-mode.jpg">

    <p>Режимы ВР-позиционирования:</p>

    <dl>
      <dt>
        sitting or standing
      </dt>
      <dd>
        Неподвижная камера, расположенная на некоторой высоте над землей. Центр мировой системы координат располагается в ногах пользователя. Этот режим рекомендуется к использованию в большинстве случаев, поскольку он совместим с большинством устройств, присутствующих на рынке, например «Мета Квест 1-3» или «ЭйчТиСи Вайв»
      </dd>
      <dt>
        looking around
      </dt>
      <dd>
        Неподвижная камера, расположенная в нулевых координатах.
      </dd>
      <dt>
        room
      </dt>
      <dd>
        Свободная камера, расположенная внутри определенных границ, в частности комнаты.
      </dd>
      <dt>
        walking
      </dt>
      <dd>
        Свободная камера, которую можно перемещать без ограничений.
      </dd>
      <dt>
        viewer locked
      </dt>
      <dd>
        Неподвижная камера, расположенная в нулевых координатах. Все содержимое является родительским для вида.
      </dd>
    </dl>

    <p>
      Чтобы правильно управлять камерой в режиме ВР, при входе в режим ВР обязательно привяжите ее к какому-либо пустому или реальному объекту, расположенному в выбранном вами 3Д-редакторе. Это необходимо потому, что в ВР-сессии камера полностью контролируется, а вы можете перемещать только пустой объект, к которому привязана камера.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-enter-vr-mode-example.jpg">

    <p>
      Начиная с релиза «Вердж3Д» 4.3, вы также можете использовать пазл <a href="manual/ru/puzzles/AR_VR.html#xr_camera_control_object">camera control object</a> вместо ручного создания управляющего объекта.
    </p>


    [anchor:check_ar_mode]

    <h3>check AR mode</h3>

    <p>
      Проверяет систему дополненной реальности. В случае успеха запускаются пазлы в слоте *if available do*. В противном случае, если браузер не поддерживает ДР или оборудование ДР не найдено, срабатывают пазлы в слоте *if unavailable do*. Пазлы в слоте *else if Apple USDZ do* запускаются, если WebXR-совместимое оборудование не найдено, но система поддерживает основанную на USDZ технологию Apple AR Quick Look.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-check-ar-mode.jpg">

    <p>
      Для получения дополнительной информации по созданию приложений дополненной реальности обратитесь к <a href="manual/ru/introduction/AR-VR-development.html#augmented_reality">соответствующему разделу</a>.
    </p>


    [anchor:enter_ar_mode]

    <h3>enter AR mode</h3>

    <p>
      Активирует режим дополненной реальности. Пазлы, размещенные в слотах *on enter do* и *on exit do*, срабатывают при входе или выходе из режима ДР. Пазлы, размещенные в слоте *if unavailable do*, срабатывают, если не удалось установить сеанс ДР.
    </p>

    <p>
      Свойство *allow HTML* используется для отображения HTML-контента в режиме ДР. Если указано, содержимое элемента <em>canvas container</em> будет отображаться поверх 3Д-контента. Этот параметр считается экспериментальным.
    </p>

    <p>Режимы позиционирования ДР:</p>

    <dl>
      <dt>
        looking around
      </dt>
      <dd>
        Неподвижная камера, расположенная в начале координат. Этот режим рекомендуется для использования в большинстве случаев, в частности для расстановки моделей на горизонтальных или вертикальных поверхностях.
      </dd>
      <dt>
        sitting or standing
      </dt>
      <dd>
        Неподвижная камера, расположенная на некоторой высоте над землей.
      </dd>
      <dt>
        room
      </dt>
      <dd>
        Мобильная камера, расположенная внутри некоторых границ, таких как комната.
      </dd>
      <dt>
        walking
      </dt>
      <dd>
        Мобильная камера без ограничений.
      </dd>
      <dt>
        viewer locked
      </dt>
      <dd>
        Неподвижная камера, расположенная в нулевых координатах. Все содержимое является родительским для вида.
      </dd>
    </dl>

    <img src="files/puzzles/puzzles-ar-vr-enter-ar-mode.jpg">


    [anchor:ar_hit_test]

    <h3>detect surface AR</h3>

    <p>
      Обнаруживает поверхности в режиме дополненной реальности путем направления луча вперед. При пересечении этот луч запускает пазлы в слоте *on intersection do*. Если пересечения не произошло или устройство находится в состоянии «разогрева», срабатывают пазлы в слоте *if missed do*.
    </p>

    <p>
      Параметр *smooth* используется для того, чтобы сделать движение маркера более плавным. Укажите значение 0 для отключения сглаживания, значение, близкое к 1, для максимального сглаживания.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-ar-hit-test.jpg">


    [anchor:ar_hit_point]

    <h3>AR hit point</h3>

    <p>
      Координаты точки поверхности, обнаруженные с помощью пазла <a href="manual/ru/puzzles/AR_VR.html#ar_hit_test">detect surface AR</a>. Могут быть отдельными значениями *X*, *Y*, *Z* или вектором *XYZ*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-ar-hit-point.jpg">


    [anchor:ar_hit_normal]

    <h3>AR hit normal</h3>

    <p>
      Координаты нормали к поверхности, обнаруженные с помощью пазла <a href="manual/ru/puzzles/AR_VR.html#ar_hit_test">detect surface AR</a>. Могут быть отдельными значениями *X*, *Y*, *Z* или вектором *XYZ*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-ar-hit-point.jpg">


    [anchor:xr_camera_control_object]

    <h3>camera control object</h3>

    <p>
      Вернуть объект, управляющий камерой в ВР/ДР-режиме. Перемещая этот объект (например пазлом <a href="manual/ru/puzzles/Objects.html#set_transform">set transform</a>), вы можете смещать камеру относительно исходного положения. Использование данного объекта избавляет от необходимости привязывать камеру к вспомогательному объекту-заглушке вручную, поскольку данный объект создаётся и уничтожается автоматически при активации/деактивации WebXR-сессии.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-xr-camera-control-object.jpg" alt="Визуальный блок для получения управляющего объекта в режиме ВР/ДР">


    [anchor:session_event]

    <h3>on session event</h3>

    <p>
      Захватывает событие сессии ВР, сгенерированное устройством виртуальной реальности (например, гарнитурой или кнопкой контроллера), и запускает пазлы, указанные в слоте *do*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-on-session-event.jpg">

    <p>События:</p>

    <ul>
      <li>*select* — срабатывает, когда пользователь нажимает и отпускает кнопку основного контроллера.</li>
      <li>*selectstart* — срабатывает при нажатии пользователем кнопки основного контроллера.</li>
      <li>*selectend* — срабатывает, когда пользователь отпускает основную кнопку контроллера.</li>
      <li>*squeeze* — срабатывает, когда пользователь сжимает и разжимает контроллер.</li>
      <li>*squeezestart* — срабатывает, когда пользователь сжимает контроллер.</li>
      <li>*squeezeend* — срабатывает, когда пользователь разжимает контроллер.</li>
      <li>*connected* — срабатывает при подключении контроллера ВР, т.е. при входе в сеанс ВР. Используйте это событие для инициализации любой логики контроллера.</li>
      <li>*disconnected* — срабатывает при отключении контроллера ВР.</li>
    </ul>


    [anchor:traverse_controllers]

    <h3>traverse controllers</h3>

    <p>
      Перебирает все подключенные контроллеры, выполняя пазлы, указанные в слоте *do*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-traverse-controllers.jpg" style="max-width: 825px">


    [anchor:get_controller_prop]

    <h3>get controller property</h3>

    <p>
      Получить свойство контроллера.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-get-controller-prop.jpg" style="max-width: 819px">

    <p>Доступные свойства:</p>

    <ul>
      <li>*object* — пустой объект, представляющий контроллер.</li>
      <li>*ray/reticle* — луч контроллера или объект прицела.</li>
      <li>*handedness* — ориентация контроллера, одна из: "left" (левый контроллер), "right" (правый контроллер), "none" (не указано, вероятно, контроллер, установленный на голове).</li>
      <li>*target ray mode* — один из: "gaze" (для устройств, типа cardboard), "tracked-pointer" (для обычных ручных контроллеров), "screen" (событие связано с вводом на холсте, в настоящее время не реализовано).</li>
      <li>*profiles* — список имен профилей контроллеров.</li>
      <li>*gamepad index* — индекс геймпада контроллера, который может быть передан в пазл <a href="manual/ru/puzzles/System.html#get_gamepad_prop">get gamepad property</a> для получения дополнительной информации от вашего контроллера, такой как состояние кнопок/осей.</li>
    </ul>


    [anchor:end_vr_session]

    <h3>end AR/VR session</h3>

    <p>
      Принудительно завершить сеанс виртуальной или дополненной реальности.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-end-ar-vr-session.jpg" alt="Визуальный блок завершения сессии ВР/ДР">


    <h2>Проблемы с пазлами?</h2>

    <p>Обращайтесь за помощью на наш <a href="https://www.soft8soft.com/ru/форумы/" target="_blank">форум</a>!</p>

  </article></body>
</html>
