<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Пазлы сцены (Scenes) — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Как выполнять различные операции со сценами и рендерингом с помощью пазлов Вердж3Д.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body><article>
    <h1>Пазлы сцены (Scenes)</h1>

    <p>
      Пазлы из этой категории выполняют различные операции со сценами и рендерингом.
    </p>

    <img src="files/puzzles/puzzles-scenes.jpg">


    <h2>Содержание</h2>

    [contents]


    [anchor:puzzles_reference]

    <h2>Перечень пазлов</h2>


    [anchor:load_scene]

    <h3>load scene + percentage</h3>

    <p>
      При срабатывании этого пазла текущая сцена выгружается, после чего загружается новая из указанного *.gltf*-файла.
    </p>

    <img src="files/puzzles/puzzles-scenes-load-scene.jpg">

    [demo:load_unload Загрузи-выгрузи]

    <p>
      После завершения загрузки запускаются пазлы слота *when loaded do*. Кроме того, существует дополнительный слот *on progress do*, пазлы которого постоянно запускаются во время загрузки и могут задействовать пазл *percentage*. После загрузки сцены ей присваивается имя, которое можно использовать для доступа и манипулирования сценой с помощью различных пазлов, связанных с объектами. По умолчанию присвоенное имя равно указанному <a href="manual/ru/puzzles/HTML.html#url_paths">УРЛ</a> сцены (например, `"path/to/scene.gltf"`). Опция *alias*, если она включена, позволяет задать имя вручную.
    </p>
    <p>
      Еще один дополнительный слот *on error do* срабатывает в случае ошибок загрузки (например, при отсутствующем *.gltf*-файле).
    </p>

    <img src="files/puzzles/puzzles-scenes-load-scene-example.jpg">


    [anchor:append_scene]

    <h3>append scene + percentage</h3>

    <p>
      При срабатывании этого пазла загружается сцена из указанного *.gltf*-файла и добавляется к текущей сцене.
    </p>

    <img src="files/puzzles/puzzles-scenes-append-scene.jpg">

    [demo:load_unload Загрузи-выгрузи]

    <p>
      После завершения загрузки запускаются пазлы слота *when loaded do*. Кроме того, существует дополнительный слот *on progress do*, пазлы которого постоянно запускаются во время загрузки и могут задействовать пазл *percentage*. Пазл "append scene" по умолчанию не загружает камеры и свет из новой сцены. Это можно изменить в настройках пазла.
    </p>
    <p>
      После добавления сцены ей присваивается имя, которое может быть использовано для доступа и манипулирования сценой с помощью различных пазлов, связанных с объектами. По умолчанию присвоенное имя равно указанному <a href="manual/ru/puzzles/HTML.html#url_paths">УРЛ</a> сцены (например, `"path/to/scene.gltf"`). Опция *alias*, если она включена, позволяет задать имя вручную.
    </p>
    <p>
      Еще один дополнительный слот *on error do* срабатывает в случае ошибок загрузки (например, при отсутствующем *.gltf*-файле).
    </p>


    <img src="files/puzzles/puzzles-scenes-append-scene-example.jpg">


    [anchor:unload_scene]

    <h3>unload scene</h3>

    <p>
      Выгружает указанную сцену или ее часть из приложения. Используйте пустое текстовое значение для выгрузки всех сцен.
    </p>

    <img src="files/puzzles/puzzles-scenes-unload-scene.jpg">


    [anchor:is_scene_loaded]

    <h3>is scene loaded</h3>

    <p>
      Проверяет, загружена ли указанная сцена. Укажите пустую строку чтобы проверить главную сцену.
    </p>

    <img src="files/puzzles/puzzles-scenes-is-scene-loaded.jpg">


    [anchor:enable_rendering]

    <h3>enable rendering</h3>

    <p>
      Возобновляет ранее отключенный рендеринг.
    </p>

    <img src="files/puzzles/puzzles-scenes-enable-rendering.jpg">


    [anchor:disable_rendering]

    <h3>disable rendering</h3>

    <p>
      Отключает рендеринг. Графика не будет обновляться, но пользовательские события будут происходить, а временная шкала анимации будет прогрессировать.
    </p>

    <img src="files/puzzles/puzzles-scenes-disable-rendering.jpg">

    <p>
      Вы можете использовать отключение рендеринга с целью экономии заряда батареи на мобильных устройствах или ноутбуках и избавления от шума вентилятора на настольных компьютерах. Вы также можете включить опцию *anti-alias*, чтобы значительно повысить качество рендеринга и компенсировать потерю производительности. Рендеринг сцены с анти-алиасингом произойдёт на следующий кадр после остановки рендеринга.
    </p>

    <img src="files/puzzles/puzzles-scenes-enable-disable-rendering-example.jpg">


    [anchor:create_environment]

    <h3>create environment</h3>

    <p>
      Создаёт новое освещение на основе изображения и назначает фон сцены. Этот пазл также создает новый материал с именем, указанным в качестве первого параметра, и добавляет его в сцену. Вы можете использовать этот материал для замены текстур или цветов окружения.
    </p>
    <p>
      Второй параметр может быть:
    </p>

    <ul>
      <li>*color* — освещение окружения будет основано на встроенном HDR-изображении 256×128, цвет фона будет установлен в серый.</li>
      <li>*texture* — и освещение среды, и фон будут основаны на встроенном HDR-изображении 256×128.</li>
    </ul>

    <img src="files/puzzles/puzzles-scenes-create-environment-example.jpg">


    [anchor:batch_geometry]

    <h3>batch geometry</h3>

    <p>
      Объединяет геометрию указанной группы мешей для повышения производительности рендеринга. При выполнении пазл собирает меши с похожими свойствами, такими как используемый материал, настройки теней, порядок рендеринга и т.д., а затем создает и добавляет новый пакет в сцену. Объекты, которые не могут быть объединены вместе, остаются нетронутыми.
    </p>

    <img src="files/puzzles/puzzles-scenes-batch-geometry.jpg">

    <p>
      Чтобы увидеть, как работает это объединение, откройте <a href="manual/ru/introduction/FAQ.html#browser_console">браузерную консоль</a>:
    </p>

    <img src="files/puzzles/puzzles-scenes-batch-geometry-console.jpg">

    <p>
      В каждой строке "Adding batch object..." можно увидеть имя создаваемого пакетного объекта. Это имя состоит из названия материала, образующего пакет, коэффициента 'x', представляющего количество мешей, объединенных вместе, и окончанияё "_batch".
    </p>
    <p>
      Например:
    </p>

    <code class="language-html">
      Adding batch object: big_table_wood_x6_batch
    </code>

    <p>
      эта строка означает, что 6 мешей с материалом "big_table_wood" были объединены в новый пакетный объект "big_table_wood_x6_batch".
    </p>
    <p class="note">
      Поскольку части пакета становятся "закрепленными" вместе (операция не может быть отменена), убедитесь, что вы не объединяете в пакет объекты, которые планируется перемещать, анимировать или изменять отдельно от пакета.
    </p>


    [anchor:export_to_gltf]

    <h3>export to gltf</h3>

    <p>
      Экспортирует сцену, модель или группу моделей в формат glTF 2.0. Укажите опцию *only visible* для экспорта только видимых объектов, опция *binary* используется для экспорта в бинарный формат GLB (glTF Binary).
    </p>

    <img src="files/puzzles/puzzles-scenes-export-to-gltf.jpg" alt="Визуальный блок программирования для экспорта в формат glTF">

    <p>
      Для достижения наилучших результатов мы рекомендуем вам использовать материалы, совместимые с glTF. Читайте об их создании в <a href="manual/ru/blender/GLTF-Materials.html">«Блендере»</a>, <a href="manual/ru/max/GLTF-Materials.html">«3дс Максе»</a> и <a href="manual/ru/maya/GLTF-Materials.html">«Майе»</a>.
    </p>

    [demo:gltf_compat]


    [anchor:export_to_usdz]

    <h3>export to usdz</h3>

    <p>
      Экспортировать сцену или модель в формат USDZ (Universal Scene Description).
    </p>

    <img src="files/puzzles/puzzles-scenes-export-to-usdz.jpg" alt="Визуальный блок программирования для экспорта в формат USDZ">

    <p>
      Этот формат позволяет просматривать сцену или модель на устройствах «Эпл» в режиме дополненной реальности. Для этого вам потребуется создать HTML-элемент `&lt;a&gt;` где-нибудь на странице приложения и указать ссылку на экспортированный ресурс в виде параметра `href` этого элемента.
    </p>

    [demo:augmented_reality Дополненная реальность]

    <p>
      Для достижения наилучших результатов мы рекомендуем вам использовать материалы, совместимые с glTF. Читайте об их создании в <a href="manual/ru/blender/GLTF-Materials.html">«Блендере»</a>, <a href="manual/ru/max/GLTF-Materials.html">«3дс Максе»</a> и <a href="manual/ru/maya/GLTF-Materials.html">«Майе»</a>.
    </p>


    [anchor:raycast]

    <h3>raycast</h3>

    <p>
      Проводит луч из исходной точки (или объекта) в заданном направлении и отображает список всех пересечений (если они есть). Третий параметр пазла используется для уменьшения количества пересекаемых объектов. Оставьте `&lt;none&gt;` или укажите имя вашей сцены, чтобы пересечь все объекты, расположенные в загруженной сцене.
    </p>

    <p>
      Отображаемый список содержит последовательность словарей со следующей информацией:
    </p>

    <ul>
      <li>*object* — имя пересекаемого объекта</li>
      <li>*distance* — расстояние до точки пересечения</li>
      <li>*point* — XYZ координаты (вектор) точки пересечения</li>
      <li>*normal* — XYZ координаты (вектор) нормали в точке пересечения</li>
      <li>*uv* — UV координаты точки пересечения</li>
    </ul>

    <p>Список пересечений отсортирован по расстоянию, первый — ближайший.</p>

    <img src="files/puzzles/puzzles-scenes-raycast.jpg">


    [anchor:add_fog]

    <h3>add fog</h3>

    <p>
      Добавляет эффект тумана на сцену. Этот эффект обычно используется для наружных сцен для улучшения визуального восприятия удалённых объектов, для сокрытия дальних объектов, а также для закрытия несоответствий сцены реальному миру (например краёв меша земли).
    </p>

    <img src="files/puzzles/puzzles-scenes-add-fog.jpg">

    <p>
      *Exponential* (экспоненциальный) туман определяется свойством *density* (насыщенность). Используется нулевое значение *density* для выключения тумана.
    </p>
    <p>
      *Linear* (линейны) туман определяется свойствами *near* (ближняя граница) и *far* (дальняя граница). Используйте нулевое значение *near* и любое отрицательное значение для *far* для выключения тумана.
    </p>


    <h2>Проблемы с пазлами?</h2>

    <p>Обращайтесь за помощью на наш <a href="https://www.soft8soft.com/ru/форумы/" target="_blank">форум</a>!</p>

  </article></body>
</html>
