<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Вердж3Д для 3дс Макса: Прозрачность — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Узнайте, какие виды прозрачности можно включить для материалов 3дс Макс и использовать в Вердж3Д.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body><article>

    <h1>Прозрачность / 3дс Макс</h1>

    <p>
      Здесь мы покажем, как включить прозрачность для стандартных, физических и glTF-совместимых в «3дс Максе».
    </p>

    [demo:transparency Прозрачность]

    [contents]


    [anchor:blended_vs_masked]

    <h2>Альфа-блендинг и альфа-клиппинг</h2>

    <p>
      «Вердж3Д», являясь 3Д-движком, работающим в реальном времени, предлагает два метода работы с прозрачными объектами: альфа-блендинг и альфа-клиппинг (обычно с изображением-маской). Альфа-блендинг позволяет комбинировать полупрозрачный цвет переднего плана с цветом фона, используя альфа-канал в качестве фактора смешивания. Альфа-клиппинг действует по принципу отбрасывания всех пикселей альфа-канала меньше заданного порога (всегда равно 0.5 в «Вердж3Д» для «3дс Макса»).
    </p>

    <img src="files/transparency-common/blending-vs-clipping.jpg">

    <p>
      Альфа-блендинг менее производителен, чем альфа-клиппинг, но обеспечивает мягкие переходы, которые выглядят красивее. Альфа-блендинг также может вызывать артефакты связанные с Z-файтингом, когда полигоны визуализируются в неправильном порядке. Альфа-клиппинг создает жёсткие края, которые не могут быть сглажены, поэтому лучше всего подходит для визуализации многочисленных небольших предметов (таких как трава или листья деревьев).
    </p>

    <p>
      Используйте выпадающий список <strong>Alpha Mode</strong> в настройках материала, чтобы выбрать между блендингом и клиппингом.
    </p>

    <img src="files/transparency-max/alpha-mode.jpg" style="max-width: 368px">

    <p>
      Также поддерживается вариация метода *Mask*, называемая *Coverage*. Она использует MSAA-рендеринг для улучшения качества рендеринга клиппинг-прозрачности.
    </p>


    [anchor:alpha_add]

    <h2>Аддитивный композитинг (рендеринг без буфера глубины)</h2>

    <p>
      «Вердж3Д» также предлагает специальный режим, для отключения буфера глубины во время рендеринга. Это приводит к отмене сравнения значений глубины пикселей перекрываемых полигонов. Такие полигоны будут визуализированы аддитивным способом, который иногда позволяет избавиться от артефактов альфа-смешения.
    </p>

    <img src="files/transparency-common/no-depth-writes.jpg">

    <p>
      Выберите *Add* или *Blend* в выпадающем списке *Alpha Mode* и снимите флажок *Depth Write* в настройках материала, чтобы включить этот режим. Кроме того, вам нужно будет увеличить значение *Rendering Order* в <a href="manual/ru/max/Lighting-and-Rendering.html#per_object_rendering_settings">настройках объекта</a>, чтобы прозрачный объект рендерился выше всех.
    </p>


    [anchor:oit_rendering]

    <h2>Порядконезависимая прозрачность (OIT)</h2>

    <p>
      «Вердж3Д» позволяет использовать метод приближенной порядконезависимой прозрачности, который не требует рендеринга геометрии в отсортированном порядке, поэтому он избавляет от большинства артефактов альфа-смешения, без использования вышеперечисленных приёмов.
    </p>

    <img src="files/transparency-common/oit-example.jpg" alt="Пример порядконезависимой прозрачности">

    <p>
      Данную опцию можно активировать в панели настроек <a href="manual/ru/max/Lighting-and-Rendering.html#global_rendering_settings">Verge3D Settings</a>.
    </p>

    <img src="files/transparency-max/oit.jpg" alt="Настройки Order-Independent Transparency в «3дс Макс»" style="max-width: 340px;">

    <p>Ограничения:</p>

    <ul>
      <li>
        OIT опция совместима только с WebGL 2, в противном случае эффекта не будет.
      </li>
      <li>
        OIT игнорируется зондами освещения <a href="manual/ru/max/Lighting-and-Rendering.html#light_probes">в виде отражающих кубических текстур</a> и <a href="manual/ru/max/Lighting-and-Rendering.html#reflection_plane_light_probes">в виде планарных отражений</a>.
      </li>
      <li>
        Может плохо работать с объектами с высокой непрозрачностью.
      </li>
      <li>
        Не следует использовать вместе с *MSAA* (мультисемпловое сглаживание) в сценах с 2 и более непрозрачными объектами. Вместо этого вы можете использовать *FXAA* (быстрое приближенное сглаживание), которое полностью совместимо с OIT.
      </li>
    </ul>


    [anchor:physical_materials]

    <h2>Прозрачность физических материалов</h2>

    <p>
      Прозрачность физических материалов можно настроить с помощью одноименного параметра материала.
    </p>

    <img src="files/transparency-max/physical-transparency.jpg" style="max-width: 342px">

    <p>Параметры:</p>

    <ul>
      <li>*Transparency* — количество прозрачности, цвет и шероховатость. Параметры цвета и шероховатости поддерживаются только для прозрачности на основе преломления (*thin-walled* off).</li>
      <li>*Thin-walled* — использовать генерируемый (*thin-walled* on) или на основе преломления (*thin-walled* off) прозрачности.</li>
      <li>*Alpha Mode* — режим прозрачности материала.</li>
      <li>*Depth Write* — отключение для аддитивного составления прозрачности (смотрите <a href="manual/ru/max/Transparency.html#alpha_add">выше</a>).</li>
    </ul>

    <p class="note">
      По умолчанию в «3дс Максе» параметр *Thin-walled* не включен, что отключает наиболее типичный рендеринг прозрачности, который вы ожидали увидеть в интерактивном приложении. Всегда следите за этим параметром, когда имеете дело с прозрачными физическими материалами.</p>

    <p>
      Любая комбинация карт и изображений может быть использована для влияния на прозрачность через вход <strong>Transparency Map</strong>.
    </p>

    <img src="files/transparency-max/physical-transparency-with-map.jpg">


    [anchor:standard_materials]

    <h2>Прозрачность для Стандартных Материалов</h2>

    <p>
      Прозрачность стандартных материалов можно настроить с помощью параметра <strong>Opacity</strong> в настройках материала.
    </p>

    <img src="files/transparency-max/standard-simple.jpg">

    <p>
      Вход <strong>Opacity</strong> стандартных материалов можно использовать для создания интересных зависимостей для большей реалистичности.
    </p>

    <img src="files/transparency-max/standard-falloff.jpg">

    <p>
      В качестве входных данных можно использовать изображение с информацией о прозрачности в альфа-канале. Вместо него можно также использовать отдельное альфа-изображение.
    </p>

    <img src="files/transparency-max/texture-settings-standard.jpg">

    <p>
      Используйте выпадающий список <strong>Alpha Mode</strong> для выбора режима прозрачности.
    </p>

    [anchor:gltf_materials]

    <h2>Прозрачность для glTF-совместимых PBR Материалов</h2>

    <p>
      Чтобы включить прозрачность для таких материалов, необходимо использовать <i>отдельную</i> альфа-карту, связанную с входом <strong>Transparency Map</strong> физического материала.
    </p>

    <img src="files/transparency-max/gltf-pbr-transparency.jpg">

    <p>
      Используйте выпадающий список <strong>Alpha Mode</strong> для выбора режима прозрачности.
    </p>

    <h2>Остались вопросы?</h2>

    <p>Задайте их на нашем <a href="https://www.soft8soft.com/ru/форумы/" target="_blank">форуме</a>!</p>

  </article></body>
</html>
