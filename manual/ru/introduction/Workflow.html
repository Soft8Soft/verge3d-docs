<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Рабочий процесс Вердж3Д для пользователей Блендера, 3дс Макса и Майи — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Здесь мы рассматриваем рабочий процесс, который оказался оптимальным для создания интерактивных 3Д-веб-приложений с использованием Блендера, 3дс Макса или Майи.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body><article>

    <h1>Рабочий процесс</h1>

    <p>В этом разделе мы рассмотрим типовой рабочий процесс, принятый в компании «Софт Эйт Софт», который также успешно применяется пользователями «Вердж3Д». В частности, он был использован при создании демо-приложений: <a href="https://cdn.soft8soft.com/demo/blender/scooter/index.html" target="_blank">«Скутер»</a>, <a href="https://cdn.soft8soft.com/demo/max/teapot_heater/index.html" target="_blank">«Подогреватель чайников»</a>, <a href="https://cdn.soft8soft.com/demo/maya/industrial_robot/index.html" target="_blank">«Промышленный робот»</a>, <a href="https://cdn.soft8soft.com/demo/blender/jewelry_configurator/index.html" target="_blank">«Ювелирный конфигуратор»</a> и др.</p>

    <figure>
      <img src="files/workflow/teapot-heater.webp" alt="WebGL-визуализация подогревателя чайников в стиле стимпанк">
      <figcaption>Демо-приложение [demoLink:teapot_heater/index Подогреватель чайников].</figcaption>
    </figure>


    [contents]

    <p>Для создания качественного интерактивного 3Д-контента не имеет значения, какой вариант «Вердж3Д» использовать. Вы можете получить примерно одинаковый результат в «Блендере», «3дс Максе» или «Майе».</p>

    <img src="files/workflow/verge3d_workflow.svg" alt="Основные этапы работы в Вердж3Д">


    [anchor:Modeling_and_Baking]

    <h2>Моделирование и запекание</h2>

    <p>В нашей команде мы практикуем следующий подход к моделированию. Сначала создаются высокополигональные версии объектов. Затем удаляется subsurf-модификатор или выполняется ретопология для получения низкополигональных моделей. Рекомендуем использовать не более 100 тысяч треугольников на один объект.</p>

    <img src="files/workflow/teapot-modeling.jpg" style="max-width: 819px;">

    <p>Для низкополигональных моделей создается текстурная развертка, а сама геометрия триангулируется. Это не требование «Вердж3Д». В дальнейшем такие модели будет проще запекать и импортировать в сторонние редакторы, например в «Сабстанс Пейнтер» для последующего текстурирования.</p>

    <p>Если необходимо использовать карту нормалей или карту затенения (англ. occlusion), они запекаются путем совмещения высокополигональных и триангулированных низкополигональных мешей.</p>


    [anchor:Choosing_Material_System]

    <h2>Выбор системы материалов</h2>

    <p>В большинстве случаев, ваш рабочий процесс будет основываться на «родной» системе материалов, используемой в выбранном 3Д-редакторе:</p>

    <ul>
      <li><a href="manual/ru/blender/Material-System.html">«Блендер»</a> — шейдерные ноды с рендером «Иви».</li>
      <li><a href="manual/ru/max/Material-System.html">«3дс Макс»</a> — физический с рендером «Арнольд».</li>
      <li><a href="manual/ru/maya/Materials.html">«Майя»</a> — Standard Surface с рендером «Вьюпорт» 2.0 в качестве референсного.</li>
    </ul>

    <p>Также посмотрите видео-уроки, в которых объясняется, как использовать материалы в приложениях «Вердж3Д»: <a href="https://rutube.ru/video/cb4ee780bc34a720e8b3ea549009074d/" target="_blank">«Блендер»</a>, <a href="https://rutube.ru/video/8984790f8deb0092e8868b947dcca35f/" target="_blank">«3дс Макс»</a>, <a href="https://rutube.ru/video/d840cd0af94bb66e23383715eabb95b4/">«Майя»</a>.</p>


    [anchor:Image_Formats_and_Resolution]

    <h2>Форматы и размер изображений</h2>

    <h3>PNG или JPEG</h3>

    <p>Для максимальной эффективности мы рекомендуем использовать для текстур форматы: PNG с максимальным сжатием без потерь или JPEG с некоторыми потерями («Вердж3Д» также поддерживает WebP, GIF, BMP, TIFF). Если вам не нужна прозрачность в текстуре (альфа-канал), отдайте предпочтение JPEG, а не PNG.</p>

    <h3>Карты нормалей</h3>

    <p>Карты нормалей следует сохранять в формате PNG, поскольку текстуры в формате JPEG часто имеют видимые артефакты. Учтите, что PNG-изображения могут иметь значительный размер файлов, поэтому используйте карты нормалей только тогда, когда это действительно необходимо.</p>

    <h3>Разрешение</h3>

    <p>Старайтесь не использовать слишком детализированные текстуры. Большие изображения плохо влияют на производительность, занимают много видеопамяти (особенно это касается мобильных устройств, на которых исчерпание доступной памяти часто вызывает сбой приложений) и значительно замедляют загрузку по сети. Разрешение большинства текстур лучше удерживать в пределах 1024 пикселей или ниже.</p>

    <h3>Используйте степень двойки</h3>

    <p>Разрешение текстуры должно равняться степени двойки. В частности, значения 256, 512, 1024 подходят, а 1000 нет. Несмотря на то, что движок автоматически масштабирует нестандартные разрешения, вы можете добиться большей эффективности в загрузке сцены, если заранее приведете свои текстуры в соответствии с вышеуказанным правилом.</p>

    <h3>Соотношение сторон</h3>

    <p>Текстуры могут быть квадратными или прямоугольными, например, 1024x512 пикселей.</p>

    <h3>Повторное использование</h3>

    <p>Всегда старайтесь повторно использовать файлы изображений в своих материалах, а не подгружать их копии.</p>

    <p class="note">Не стоит повторно использовать большие текстуры в виде элементов пользовательского интерфейса. Их следует заранее масштабировать и сохранить в виде новых файлов, даже если это несколько увеличит время загрузки.</p>

    <h3>Пакуйте черно-белые текстуры в каналы цветности</h3>

    <p>Если у вас есть несколько черно-белых изображений (карты AO, лайтмапы, карты прозрачности, цветные маски и т.д.), постарайтесь <a href="manual/ru/introduction/Optimizing-WebGL-performance.html#Texturing">упаковать</a> их в каналы цветности (красный, зелёный, синий, альфа) одной текстуры.</p>

    <h3>Загружайте по необходимости</h3>

    <p>Если вы разрабатываете приложение со множеством вариаций и цветовых решений, то лучшим вариантом будет загружать сначала стартовый набор текстур. Затем подгружать необходимые текстуры с помощью пазла <a href="manual/ru/puzzles/Materials.html#replace_texture">replace texture</a> или частей сцены с помощью пазла <a href="manual/ru/puzzles/Scenes.html#append_scene">append scene</a>.</p>


    [anchor:Environment_Map]

    <h2>Карта окружения</h2>

    <p>Карта окружения (также используют термин «освещение на основе текстуры») предназначена для создания фона сцены и реалистичных отражений на материалах. Мы рекомендуем использовать изображения в формате HDR (.hdr), развёрнутые в виде равнопромежуточной (картографической) проекции. Из соображений производительности, размер карты окружения не должен превышать 2048x1024 пикселей.</p>

    <img src="files/workflow/hdr-environment.jpg" alt="Назначение HDR-текстуры в Блендере" style="max-width: 772px;">

    <p>Кроме того, HDR-текстуры можно использовать для имитации сложных условий освещения. Например, если ламп слишком много, либо если они не могут быть аппроксимированы точечными или квадратными источниками.</p>

    <p>Стандартные шаблоны «Вердж3Д»-приложений уже включают универсальную текстуру в формате HDR (файл называется <i>environment.hdr</i>). Вы можете использовать ее в своих собственных проектах.</p>

    <p>Посмотрите обучающее видео по настройке HDR-окружения в сцене: <a href="https://rutube.ru/video/cb4ee780bc34a720e8b3ea549009074d/" target="_blank">«Блендер»</a>, <a href="https://rutube.ru/video/d840cd0af94bb66e23383715eabb95b4/" target="_blank">«3дс Макс»</a>, <a href="https://rutube.ru/video/d840cd0af94bb66e23383715eabb95b4/">«Майя»</a>.</p>


    [anchor:HDR_Rendering]

    <h2>HDR-рендеринг</h2>

    <p>HDR-рендеринг можно включить с помощью опции в окне настроек экспорта *Verge3D* («3дс Макс» и «Майя»). В «Блендере» эта опция находится на панели *Render* в настройках *Verge3D*. В этом режиме используются текстуры повышенной точности для более выразительного рендеринга при контрастном освещении, что особенно важно для корректной визуализации эффекта постобработки <a href="manual/ru/puzzles/Postprocessing.html#bloom">блум</a>.</p>

    <figure style="max-width: 919px;">
      <img src="files/workflow/scooter-bloom.jpg" alt="Scooter, a 3D visualization which uses HDR rendering capabilities">
      <figcaption>«Скутер» — приложение использующее возможности HDR.</figcaption>
    </figure>


    [anchor:Animation_]

    <h2>Анимация</h2>

    <p>Анимационные клипы создаются для необходимых частей модели. Можно использовать скелетную и объектную анимации, морфинг и анимацию материалов (подробнее смотрите в руководстве по анимации для <a href="manual/ru/blender/Animation.html">«Блендера»</a>, <a href="manual/ru/max/Animation.html">«3дс Макса»</a> или <a href="manual/ru/maya/Animation.html">«Майи»</a>).</p>

    <img src="files/workflow/animation.jpg" alt="Создание интерактивной анимации">

    <p>Всегда давайте понятные названия анимированным объектам, что существенно упростит их поиск в <a href="manual/ru/puzzles/Animation.html">редакторе пазлов</a>.</p>

    <img src="files/workflow/advanced_animation_puzzle.jpg" alt="Анимационные пазлы" style="max-width: 819px;">

    <p>Также посмотрите следующие видео по работе с анимацией: <a href="https://rutube.ru/video/44fe174fab8607083029afdee8e9dcf0/" target="_blank">«Блендер»</a>, <a href="https://rutube.ru/video/1f1e29b3a90438f701e21f7002912c08/" target="_blank">«3дс Макс»</a>, <a href="https://rutube.ru/video/8f56aac7d4b7a9d20c97dfa630f0a5c3/" target="_blank">«Майя»</a>.</p>


    [anchor:Layout_and_UI]

    <h2>Верстка и интерфейс</h2>

    <p>Для художников незнакомых с веб-программированием мы предлагаем три различных метода создания пользовательских интерфейсов. Первый, наиболее простой — сделать элементы пользовательского интерфейса прямо в пакете моделирования, а затем использовать привязку к камере и настройку <em>fit to camera edge</em>, чтобы расположить их на экране (см. руководство для <a href="manual/ru/blender/Camera.html#fit_to_camera_edge">«Блендера»</a>, <a href="manual/ru/max/Camera.html#fit_to_camera_edge">«3дс Макса»</a> и <a href="manual/ru/maya/Camera.html#fit_to_camera_edge">«Майи»</a>). Кроме того, поскольку этот метод не основан на HTML-элементах, он хорошо работает для приложений виртуальной и дополненной реальности.</p>

    <figure>
      <img src="files/workflow/e-learning-demo.jpg"></a>
      <figcaption>[demoLink:e-learning/e-learning Электронное обучение] - демо использующее элементы интерфейса, сделанные в пакете моделирования.</figcaption>
    </figure>

    <p>Другой подход – вёрстка с помощью <a href="manual/ru/puzzles/HTML.html">HTML-пазлов</a>. С его помощью вы сможете создавать достаточно сложные интерфейсы без необходимости писать код на HTML/CSS.</p>

    <figure>
      <img src="files/workflow/farmers-journey.webp"></a>
      <figcaption>[demoLink:farmers_journey/farmers_journey Приключение фермера] — браузерная игра, использующая интерфейс, выполненный на пазлах.</figcaption>
    </figure>

    <p>Чтобы узнать больше о HTML-пазлах, рекомендуется ознакомиться с данной серией <a href="https://rutube.ru/plst/545252/" target="_blank">обучающих видео</a>.</p>

    <p>Третьим подходом к разработке интерфейсов является использование стороннего программного обеспечения для веб-дизайна. Вы можете брать любой редактор ВИЗИВИГ (англ. WYSIWYG), способный экспортировать файлы HTML и CSS. Неплохим инструментом является <a href="https://webflow.grsm.io/3441118" target="_blank">Вебфлоу</a> (англ. Webflow), который мы использовали для создания ряда демо-приложений, таких как «Скутер», «Промышленный робот», «Кресло» и др. Вы также можете создавать HTML-вёрстку вручную или воспользоваться любым другим инструментом.</p>

    <img src="files/workflow/webflow-project.jpg" style="max-width: 819px;">

    <p>Данный подход предполагает, что элементы интерфейса (меню, кнопки, информационные поля...) создаются как часть отдельной веб-страницы, в которую встраивается «Вердж3Д»-приложение. Узнать подробности вы можете в <a href="manual/ru/introduction/HTML-based-user-interfaces.html">руководстве</a> по HTML-разработке.</p>


    [anchor:Post_processing]

    <h2>Постпроцессинг</h2>

    <p>Эмбиент окклюжн (англ. Ambient Occlusion, GTAO) включается в настройках пакета моделирования: <a href="manual/ru/blender/Lighting-and-Rendering.html#ambient_occlusion">«Блендера»</a> / <a href="manual/ru/max/Lighting-and-Rendering.html#ambient_occlusion">«Макса»</a> / <a href="manual/ru/maya/Lighting-and-Rendering.html#ambient_occlusion">«Майи»</a>.</p>

    <p>Остальные эффекты постобработки включаются с помощью <a href="manual/ru/puzzles/Postprocessing.html">специальных пазлов</a>: bloom (лучше использовать с активной опцией HDR), brightness-contrast, grayscale, depth of field, afterimage, screen-space reflection, и screen-space refraction. Параметры для этих эффектов могут быть изменены во время выполнения или анимированы с высокой производительностью, благодаря внутреннему кешированию. Существует также пазл для отключения эффектов постобработки.</p>

    <img src="files/workflow/post-process-effects.png" alt="Работа с постобработкой в Вердж3Д" style="max-width: 755px;">


    [anchor:Audio_]

    <h2>Аудио</h2>

    <p>Фоновая музыка, звуки событий могут быть добавлены с помощью <a href="manual/ru/puzzles/Sound.html">звуковых пазлов</a>. При этом необходимо использовать формат <strong>.mp3</strong> для аудиофайлов, так как он поддерживается во всех веб-браузерах.</p>

    <img src="files/workflow/sounds.jpg">

    <p>Существует ограничение для использования звуков: воспроизведение может быть начато только через прямое взаимодействие с веб-страницей. Например, блок ниже будет работать везде, в том числе на устройствах Эпл:</p>

    <img src="files/workflow/audio-example1.webp">

    <p>Однако если звук не был инициирован пользователем напрямую, воспроизведения не произойдет:</p>

    <img src="files/workflow/audio-example2.webp">

    <p>Для решения проблемы вы можете использовать пазл <strong>on event / touchstart</strong>. В блоке ниже выполняется проигрывание и установка паузы для всех звуков при первом клике пользователя по экрану:</p>

    <img src="files/workflow/audio-example3.jpg">

    <p>Эту заготовку вы можете найти в библиотеке пазлов с названием *Sound iOS Workaround*.</p>


    [anchor:Asset_Compression]

    <h2>Компрессия ассетов</h2>

    <p>После завершения работы над приложением, вы можете оптимизировать загрузку файлов, прочитав соответствующее <a href="manual/ru/introduction/Asset-compression.html">руководство</a>.</p>

    <p>Вы также можете посмотреть видео, где демонстрируется работа со сжатыми ассетами: <a href="https://rutube.ru/video/38e0acc73f838281be86998102745e78/" target="_blank">«Блендер»</a>, <a href="https://rutube.ru/video/7f4771758656b9399fd96f94513bc273/" target="_blank">«3дс Макс»</a>, <a href="https://rutube.ru/video/c8ce6df57443e020f58b5343d32ddb1c/" target="_blank">«Майя»</a>.</p>


    [anchor:Publishing]

    <h2>Публикация</h2>

    <p>Изучите руководство по <a href="manual/ru/introduction/App-Manager.html#Publish">диспетчеру приложений</a>, чтобы узнать подробнее о публикации проектов.</p>


    <h2>Остались вопросы?</h2>

    <p>Не стесняйтесь спрашивать на нашем <a href="https://www.soft8soft.com/ru/форумы/" target="_blank">форуме</a>!</p>

  </article></body>
</html>
