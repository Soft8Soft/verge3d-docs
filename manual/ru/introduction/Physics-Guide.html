<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Руководство по физике в Вердж3Д — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Как использовать физический движок Вердж3Д для моделирования динамики и столкновений на вашей сцене.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body><article>

    <h1>Руководство по физике в «Вердж3Д»</h1>

    <p>«Вердж3Д» включает в себя физический движок, наделяющий ваши 3Д-объекты свойствами из реального мира. Эта функция будет особенно полезна при создании 3Д-игр и приложений виртуальной и дополненной реальности.</p>

    <iframe class="video-480p" src="https://rutube.ru/play/embed/711583c3d69fe9c7af6ae26e36f49d2c/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

    <p></p>

    <p>В качестве физического бэкенда мы используем физический движок «Буллет» с открытым исходным кодом, веб-версия которого называется <a href="https://github.com/kripken/ammo.js" target="_blank">«Аммо-Джей-Эс»</a>.</p>

    <h2>Содержание</h2>

    [contents]


    [anchor:getting_started_with_physics]

    <h2>Начало работы с физикой</h2>

    <p>
      Прежде чем вы сможете использовать физику, необходимо добавить модуль физики в ваше приложение. Это можно сделать на этапе создания приложения с помощью соответствующей опции в диспетчере приложений (включена по умолчанию).
    </p>

    <img src="files/physics-guide/app-manager-physics.jpg" style="max-width: 522px">

    <p>
      Если вы забыли включить параметр *Physics*, просто скопируйте файлы *ammo.wasm.js* и *ammo.wasm.wasm* из папки <em>build</em> установочной папки «Вердж3Д» (например <em>C:\Program&nbsp;Files\Verge3D_for_Blender\build</em>) в папку с приложением.
     </p>


    [anchor:using_puzzles]

    <h2>Использование пазлов</h2>

    <p>
      Ознакомьтесь с <a href="manual/ru/puzzles/Physics.html">пазлами физики</a>.
    </p>


    [anchor:general_recommendations]

    <h2>Общие рекомендации</h2>

    <ul>
      <li>
        Обязательно применяйте масштаб в пакете моделирования, так как физический движок просто игнорирует масштаб объектов.
      </li>
      <li>
        Для достижения наилучших результатов начало координат вашего объекта должно совпадать с центром массы. Чтобы сделать это в «Блендер» 2.8+, используйте оператор <strong>Object → Set Origin → Origin to Center of Mass (Volume)</strong>.
      </li>
      <li>
        Никогда не позиционируйте и не анимируйте <em>динамическое</em> тело напрямую. Вместо этого применяйте к нему силу/импульс/скорость используя пазл <a href="manual/ru/puzzles/Physics.html#apply_vector">apply vector</a> или прикрепите его к другому объекту пазлом <a href="manual/ru/puzzles/Physics.html#snap_body">snap body</a>.
      </li>
      <li>
        В целях оптимизации, «Вердж3Д» отключает <em>динамические</em> тела после периода бездействия. Вы можете активировать эти тела снова, применив какой-либо вектор, столкнув их с другими телами или используя опцию *activate* пазла <a href="manual/ru/puzzles/Physics.html#set_body_state">set body state</a> . Если вам нужно, чтобы тело было активным постоянно, примените к нему состояние *disable deactivation* используя тот же пазл.
      </li>
      <li>
        Включить метод непрерывного обнаружения столкновений (CCD) для улучшения качества моделирования быстродвижущихся тел, таких как снаряды, шары для пинбола/бильярда/боулинга и т.д. Для этого установите параметры *ccd motion threshold* и *ccd swept sphere radius* на эти тела. См. <a href="manual/ru/puzzles/Physics.html#apply_body_param">здесь</a> для дополнительной информации.
      </li>
      <li>
         Помните, что вы не можете <a href="manual/ru/puzzles/Physics.html#detect_collisions">определить коллизию</a> между  *static*/*static*, *static*/*kinematic*, или *kinematic*/*kinematic* объектами. Если использование *dynamic* тела не представляется возможным, рассмотрите возможность назначения *ghost* физики для реализации обнаружения движущегося рядом нединамического объекта с *static*/*kinematic* средой.
      </li>
    </ul>


    [anchor:creating_first_person_character]

    <h2>Создание персонажа от первого лица</h2>

    <p>Режим персонажа от первого лица может быть удобен не только для шутеров и RPG-игр, но и для любых приложений, требующих исследования больших пространств. Это может быть визуализация архитектуры, приложения для электронного обучения и интерактивные гиды, музеи и другие культурные объекты, и даже виртуальные 3Д-рынки. Кроме того, вы можете интегрировать персонажа от первого лица в ваше ВР-приложение, сделав его гораздо более реалистичным и увлекательным!</p>

    <p>Существует множество возможных способов реализации режима FPS, но для неопытных пользователей «Вердж3Д» мы рекомендуем вам следовать этому краткому руководству для более быстрого достижения результатов.</p>

    <p>Создайте объект в форме капсулы, который символизирует вашего персонажа. Настройте его высоту и ширину, чтобы он выглядел более реалистично. Убедитесь, что вы правильно установили центр объекта.</p>

    <img src="files/physics-guide/capsule-shape.jpg" style="max-width: 639px">

    <p>В пазлах, назначьте персонажу *dynamic* *capsule* (капсулообразное) тело и отключите его вращение. Таким образом, вы позволите персонажу двигаться, но не вращаться. Также примените *disable deactivation* к вашей капсуле.</p>

    <img src="files/physics-guide/create-character-puzzles.jpg" style="max-width: 725px">

    <p>Поскольку персонажу нужен пол (+стены) или земля, чтобы ходить, создайте такие тела, используя соответствующие пазлы *create physics body*.</p>

    <p>Следующий шаг - настройка камеры. Камере не будет назначена физика, поскольку она нужна нам только для того, чтобы быть нашими "глазами". Установите на него элементы управления *First-Person*, но не назначайте материал коллизии (мы будем использовать полнофункциональное обнаружение коллизий, предоставляемое физическим движком, а не базовую симуляцию пола/стен). Также, уберите галку с параметра *Allow Panning* , а параметр *Movement Speed* поставьте на ноль:</p>

    <img src="files/physics-guide/firstperson-camera-settings.jpg" style="max-width: 320px">

    <p>Теперь нам нужно прикрепить камеру к "голове" персонажа. Нет необходимости создавать модель головы, добавьте в сцену пустой объект под названием "Голова" и прикрепите его к верхней части модели капсулы. Таким образом, "голова" будет двигаться вместе с персонажем.</p>

    <p>С помощью дополнительного объекта "Голова" вы можете прикреплять/откреплять камеру к персонажу. Чтобы прикрепить камеру, используйте <a href="manual/ru/puzzles/Objects.html#parent">parent</a> и <a href="manual/ru/puzzles/Objects.html#snap_to_object">snap to object</a> пазлы:</p>

    <img src="files/physics-guide/snap-camera-puzzles.jpg" style="max-width: 560px">

    <p class="note">Чтобы открепить камеру, используйте пазл *parent* с пустым полем *to object* .</p>

    <p>Персонаж создан! Теперь пришло время заставить его двигаться в вашей сцене. В самом простом случае нам нужно двигаться вперед, когда пользователь нажимает клавишу со стрелкой вверх. Для этого примените к персонажу вектор *linear velocity*, который рассчитывается на основе горизонтального направления камеры. Чтобы сделать симуляцию более достоверной, всегда применяйте векторы, используя пазл <a href="manual/ru/puzzles/Physics.html#on_simulation_tick">on simulation tick</a> .</p>

    <img src="files/physics-guide/moving-character-puzzles.jpg" style="max-width: 981px">

    <p>Для перемещения персонажа на мобильном устройстве вам понадобятся дополнительные элементы "контроллера". Вы можете создать их с помощью 3Д-объектов, родительских по отношению к камере или с помощью <a href="manual/ru/introduction/HTML-based-user-interfaces.html">HTML-элементов</a>.</p>

    <p>Для перемещения персонажа в режиме ВР вы можете использовать пазл <a href="manual/ru/puzzles/AR_VR.html#get_controller_prop">get controller property</a> и пазл <a href="manual/ru/puzzles/System.html#get_gamepad_prop">get gamepad property</a> для получения статуса кнопок/осей контроллера ВР.</p>


    [anchor:simulating_car_physics]

    <h2>Симуляция физики автомобиля</h2>

    <p>
      Реалистичное симулирование физики автомобиля может быть действительно полезным в таких приложениях, как интерактивные программы настройки автомобиля или гоночные игры.
    </p>

    [demo:arcade_racing Аркадные гонки]


    <h2>Остались вопросы?</h2>

    <p>Задайте их на нашем <a href="https://www.soft8soft.com/ru/форумы/" target="_blank">форуме</a>!</p>


  </article></body>
</html>
