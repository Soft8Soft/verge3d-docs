<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Создание десктопных приложений с использованием Электрона — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Узнайте, как использовать «Электрон» для создания кросс-платформенных приложений «Вердж3Д» для настольных компьютеров.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
    <meta property="og:image" content="https://cdn.soft8soft.com/images/electron.jpg">
    <meta property="article:tag" content="electron">
  </head>
  <body><article>

    <h1>Создание десктопных приложений с использованием «Электрона»</h1>

    <p>
      «Электрон» — это инструмент для преобразования веб-приложений в кросс-платформенные десктопные приложения. «Электрон» может создавать приложения для «Виндоус», «Мак ОС» (поддерживаются архитектуры «Интел» и «Эпл Силикон») и «Линукс». Инструмент полностью бесплатен, прост в использовании и позволяет выполнять расширенную настройку с помощью «Ява Скрипта» (если это необходимо).
    </p>

    [contents]


    [anchor:creating_app]

    <h2>Создание приложения</h2>

    <p>
      «Электрон» можно установить через NPM или загрузить из интернета. Чтобы упростить работу, мы интегрировали конструктор приложений «Электрон» прямо в диспетчер приложений.
    </p>

    <img src="files/creating-desktop-apps/app-manager-create-native-app.jpg">

    <p>
      С его помощью вы можете загрузить двоичные файлы «Электрон» для выбранной целевой платформы, а затем создать готовое к использованию приложение прямо из приложения «Вердж3Д».
    </p>

    <img src="files/creating-desktop-apps/app-manager-electron.jpg">

    <p>
      Поскольку количество доступных платформ огромно, воспользуйтесь следующей памяткой, чтобы понять, что вам действительно нужно:
    </p>

    <dl>
      <dt>None</dt>
      <dd>Собрать npm-пакет вместо готовой к использованию сборки. Для опытных пользователей, знакомых с NPM. Следуйте инструкциям <a href="manual/ru/introduction/Creating-Desktop-Apps.html#using_npm">ниже</a>, чтобы продолжить создание приложения.</dd>
      <dt>Windows (64-bit)</dt>
      <dd>«Виндоус» 7 или более поздняя версия, 64 бит.</dd>
      <dt>Windows (ARM)</dt>
      <dd>«Виндоус» 10 на устройствах с 64-разрядными процессорами АРМ.</dd>
      <dt>Windows (32-bit)</dt>
      <dd>«Виндоус» 7 или более поздняя версия, 32 бит.</dd>
      <dt>macOS (64-bit)</dt>
      <dd>«Мак ОС» 10.13 («Хай Сиерра») или более поздняя версия на платформе «Интел».</dd>
      <dt>macOS (Apple Silicon)</dt>
      <dd>«Мак ОС» 11 («Биг Сур») или более поздняя версия, компьютеры «Эпл Силикон» (также известные как M1-M4).</dd>
      <dt>Linux (64-bit)</dt>
      <dd>«Линукс», 64 бит, такие как «Убунту», «Федора», «ОпенСусе», или «Арч».</dd>
      <dt>Linux (ARM)</dt>
      <dd>«Линукс» на 64-битных устройствах АРМ.
    </dl>

    <p class="note">
      Из-за ограничений архитектуры ОС «Виндоус» невозможно создавать приложения для «Мак ОС» на этой системе. Вместо этого используйте «Мак ОС« или «Линукс».
    </p>

    <p>
      Когда ваше приложение будет готово, скачайте его, а затем распакуйте *.zip*-архив в какую-нибудь папку.
    </p>


    [anchor:running_your_app]

    <h2>Запуск вашего приложения</h2>

    <p>
      Выполните ваше приложение, запустив *app_name.exe* (или *AppName.app* на «Мак ОС», или *app_name* на «Линуксе»), расположенный в распакованной папке с приложением.
    </p>

    <img src="files/creating-desktop-apps/electron-new-app.jpg" style="max-width: 827px">

    <p>
      Имейте в виду, что поскольку ваше приложение <em>не подписано</em>, и «Виндоус», и «Мак ОС» (но не «Линукс») не позволят его запустить. Например, в «Виндоус» вы увидите следующее диалоговое окно *Windows protected your PC* («Система Windows защитила ваш компьютер»):
    </p>

    <img src="files/creating-desktop-apps/windows-protected-your-pc.jpg">

    <p>
      Нажмите на ссылку *More info* («Подробнее»), затем *Run anyway* («Выполнить в любом случае»), чтобы запустить приложение. Чтобы решить эту проблему, особенно когда вы распространяете свою работу среди конечных пользователей, ваше приложение должно быть подписано. Подробнее смотрите в разделе  <a href="https://www.electronjs.org/docs/tutorial/code-signing" target="_blank">подписание кода</a> документации «Электрон».
    </p>

    <p>
      В «Мак ОС» (в версии для «Эпл Силикон») вы можете получить сообщение, что приложение повреждено (хотя это не так):
    </p>

    <img src="files/creating-desktop-apps/macos-app-is-demaged.webp" style="max-width: 378px">

    <p>
      В этом случае вам потребуется очистить атрибут нахождения *.zip*-архива на карантине (с помощью приложения Terminal):
    </p>

    <code>
      xattr -r -d com.apple.quarantine my_awesome_app.zip
    </code>

    <p>
      а затем снова распаковать и запустить приложение.
    </p>


    [anchor:beautifying_things]

    <h2>Настройка дополнительных параметров приложения</h2>


    [anchor:modifying_app_name_icon]

    <h3>Изменение имени и значка приложения</h3>

    <p>
      Смотрите <a href="https://www.electronjs.org/docs/tutorial/application-distribution#rebranding-with-downloaded-binaries" target="_blank">официальное руководство «Электрона»</a> о том, как переименовать сборку приложения и назначить пользовательский значок.
    </p>


    [anchor:customizing_menu]

    <h3>Настройка меню</h3>

    <p>
      Чтобы полностью отключить меню приложения, вставьте следующую строку в *main.js* сразу после метода *loadFile()*:
    </p>

    <code>
      win.removeMenu();
    </code>

    <p>
      Чтобы создать собственное меню, сначала подключите модуль *Menu* к вашему приложению:
    </p>

    <code>
      const { Menu } = require('electron');
    </code>

    <p>
      Мы будем использовать модуль *shell* для открытия внешнего сайта при нажатии на меню. Поэтому добавьте модуль *shell* и сюда:
    </p>

    <code>
      const { shell } = require('electron');
    </code>

    <p>
      Затем добавьте следующий код в *main.js* сразу после метода *loadFile()*:
    </p>

    <code>
    var menu = Menu.buildFromTemplate([{
        label: 'Menu',
        submenu: [
            {
                label: 'Soft8Soft Website',
                click() {
                    shell.openExternal('https://www.soft8soft.com');
                }
            },
            {
                label: 'Exit',
                click() {
                    app.quit()
                }
            }
        ]
    }]);
    Menu.setApplicationMenu(menu);
    </code>

    <p>
      Пример измененного файла *main.js* можно скачать <a href="files/creating-desktop-apps/menu-template/main.js" download>здесь</a>.
    </p>

    <p>
      Поместите модифицированный файл *main.js* в папку с приложение и снова его запустите. Вы должны получить следующее:
    </p>

    <img src="files/creating-desktop-apps/electron-app-with-menu.jpg" style="max-width: 800px">


    [anchor:using_npm]

    <h2>Продвинутая разработка «Электрон»-приложений с помощью NPM</h2>

    <p>
      С помощью утилиты *npm* вы можете сделать разработку «Электрон»-приложений более эффективной. Вы можете установить её, следуя <a href="https://nodejs.org/en/download/" target="_blank">этим инструкциям</a>.
    </p>

    <p>
      Более подробную информацию об использовании NPM можно найти в документации на <a href="https://www.electronjs.org/docs" target="_blank">«Электрон»</a>.
    </p>


    [anchor:overriding_template_files]

    <h2>Изменение файлов шаблона приложений</h2>

    <p>
      Файлы шаблона, используемого для создания приложений на основе «Электрона» расположены в подпапке *manager/templates/Electron* внутри установочной папки «Вердж3Д». Мы не рекомендуем редактировать эти файлы напрямую, однако вы легко можете заменить любой из них, поместив файл с тем же именем внутри папки разрабатываемого приложения. Например, чтобы заменить шаблонный скрипт *main.js*, используемый для инициализации приложения, своей собственной реализацией, скопируйте этот файл из папки с шаблоном (либо создайте новый с нуля) и разместите внутри папки с приложением:
    </p>

    <img src="files/creating-desktop-apps/override-main.webp">


    [anchor:no_internet_connection]

    <h2>Создание приложений при отсутствии подключения к интернету</h2>

    <p>
      Для создания готового приложения, диспетчеру приложений требуется загрузить одну из сборок «Электрона» с серверов «Софт Эйт Софт», для чего требуется соединение к интернету. Если соединения нет, либо оно ограничено (прокси-сервером или файрволлом), вам потребуется скачать сборки вручную, чтобы диспетчер приложений смог найти их на локальном носителе.
    </p>

    <p>
      Используйте следующий список для загрузки нужной сборки. В зависимости от целевой платформы, вам потребуется скачать одну или несколько.
    </p>

    <ul>
      <li><a href="https://cdn.soft8soft.com/electron/v22.3.15/electron-v22.3.15-win32-x64.zip">«Виндоус» (64 бит)</a></li>
      <li><a href="https://cdn.soft8soft.com/electron/v22.3.15/electron-v22.3.15-win32-arm64.zip">«Виндоус» (АРМ)</a></li>
      <li><a href="https://cdn.soft8soft.com/electron/v22.3.15/electron-v22.3.15-win32-ia32.zip">«Виндоус» (32 бит)</a></li>
      <li><a href="https://cdn.soft8soft.com/electron/v22.3.15/electron-v22.3.15-darwin-x64.zip">«Мак ОС» (64 бит)</a></li>
      <li><a href="https://cdn.soft8soft.com/electron/v22.3.15/electron-v22.3.15-darwin-arm64.zip">«Мак ОС» («Эпл Силикон»)</a></li>
      <li><a href="https://cdn.soft8soft.com/electron/v22.3.15/electron-v22.3.15-linux-x64.zip">«Линукс» (64 бит)</a></li>
      <li><a href="https://cdn.soft8soft.com/electron/v22.3.15/electron-v22.3.15-linux-arm64.zip">«Линукс» (АРМ)</a></li>
    </ul>

    <p>
      Затем скопируйте скачанные сборки в папку с настройками диспетчера приложений (находится в пользовательской папке). Разместите их как есть (не распаковывая!):
    </p>

    <ul>
      <li>«Виндоус» — <i>AppData\Roaming\Soft8Soft\Имя Продукта</i></li>
      <li>«Мак ОС» — <i>Library/Application Support/Имя Продукта</i></li>
      <li>«Линукс» — <i>.config/имя_продукта</i></li>
    </ul>

    <p>
      С этого момента диспетчер приложений будет использовать эти сборки для создания десктопных приложений, не закачивая их в интернете.
    </p>

    <h2>Остались вопросы?</h2>

    <p>Задайте их на нашем <a href="https://www.soft8soft.com/ru/форумы/" target="_blank">форуме</a>!</p>

  </article></body>
</html>
