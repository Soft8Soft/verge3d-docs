<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Комплект разработчика Вердж3Д — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Узнайте, как использовать комплект разработчика для создания собственной модификации Вердж3Д.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
    <style>
      table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 10px;
      }
    </style>
  </head>
  <body><article>

    <h1>Комплект разработчика Вердж3Д</h1>

    <p>
      Комплект разработчика «Вердж3Д» (англ. Developer Kit, DevKit) — это набор примеров, инструментов и исходного кода, которые поставляются с <a href="https://www.soft8soft.com/ru/%D0%BA%D0%B0%D1%82%D0%B5%D0%B3%D0%BE%D1%80%D0%B8%D1%8F-%D0%BF%D1%80%D0%BE%D0%B4%D1%83%D0%BA%D1%82%D0%B0/%d0%ba%d0%be%d1%80%d0%bf%d0%be%d1%80%d0%b0%d1%82%d0%b8%d0%b2%d0%bd%d1%8b%d0%b5-%d0%bb%d0%b8%d1%86%d0%b5%d0%bd%d0%b7%d0%b8%d0%b8/" target="_blank">корпоративными версиями</a> «Вердж3Д». Этот набор поможет вам выполнять различные задачи разработчика, такие как:
    </p>

    <ul>
      <li>Изучение и обзор внутренних компонентов набора инструментов «Вердж3Д».</li>
      <li>Модификация «Вердж3Д» и использование модифицированных версий в собственных 3Д-приложениях.</li>
      <li>Расширение API «Вердж3Д» с помощью собственных классов и методов.</li>
      <li>Разработка новых блоков пазлов.</li>
      <li>Совершенствование glTF-экспортера «Вердж3Д», добавление собственных данных или параметров.</li>
      <li>Разработка своего собственного конфигуратора или системы e-commerce с использованием плагина <em>«Вердж3Д для Вордпресс»</em> в качестве референса.</li>
    </ul>

    <p class="note">
      Комплект разработчика предназначен для опытных программистов, желающих модифицировать движок. Он не нужен для создания приложений «Вердж3Д» со стандартным набором функций.
    </p>

    [contents]


    [anchor:Installation]

    <h2>Установка и настройка</h2>

    <p>
      Скачайте архив DevKit из <a href="https://www.soft8soft.com/ru/%d0%b0%d0%ba%d0%ba%d0%b0%d1%83%d0%bd%d1%82/downloads/" target="_blank">раздела загрузок</a> вашей учетной записи. Распакуйте этот архив в выбранную вами директорию.
    </p>

    <p>
      Если вы собираетесь собрать движок «Вердж3Д» или редактор пазлов из исходного кода, вам понадобится утилита *npm*, которая является частью среды разработки *Node.js*. Вы можете установить ее с помощью <a href="https://nodejs.org/en/download/package-manager/" target="_blank">этих инструкций</a>.
    </p>

    <p>
      Наконец, перейдите в распакованный каталог DevKit и выполните следующую команду для установки зависимостей:
    </p>

    <code>npm install</code>


    [anchor:Structure]

    <h2>Структура комплекта разработчика</h2>

    <p>
      DevKit включает следующие каталоги:
    </p>

    <table style="width:100%">
      <tr>
        <th>Каталог</th>
        <th>Описание</th>
      </tr>
      <tr>
        <td>addons/verge3d</td>
        <td>Исходный код дополнения для Блендер (только «Вердж3Д для Блендера»).</td>
      </tr>
      <tr>
        <td>build</td>
        <td>Готовые скрипты движка «Вердж3Д» и дополнительные модули (ammo.js и т.д.).</td>
      </tr>
      <tr>
        <td>ktx</td>
        <td>Исходный код модуля текстурной компрессии.</td>
      </tr>
      <tr>
        <td>max_plugin</td>
        <td>Исходный код плагина для 3дс Макс (только «Вердж3Д для 3дс Макса»).</td>
      </tr>
      <tr>
        <td>maya_plugin</td>
        <td>Исходный код плагина для Майя (только «Вердж3Д для Майи»).</td>
      </tr>
      <tr>
        <td>puzzles</td>
        <td>Готовые скрипты и исходный код редактора пазлов.</td>
      </tr>
      <tr>
        <td>python</td>
        <td>Python 3 и служебные модули.</td>
      </tr>
      <tr>
        <td>src</td>
        <td>Исходный код движка «Вердж3Д».</td>
      </tr>
      <tr>
        <td>templates</td>
        <td>Шаблоны приложений «Вердж3Д».</td>
      </tr>
      <tr>
        <td>utils</td>
        <td>Различные утилиты.</td>
      </tr>
      <tr>
        <td>wordpress</td>
        <td>Исходный код плагина <em>«Вердж3Д для Вордпресс»</em>.</td>
      </tr>
      <tr>
        <td>xz</td>
        <td>Исходный код модуля сжатия XZ.</td>
      </tr>
    </table>


    [anchor:Building_Verge3D]

    <h2>Сборка «Вердж3Д»</h2>

    <p>
      Перед компиляцией «Вердж3Д», пожалуйста, убедитесь что вы установили *npm* и все необходимые зависимости, как описано выше.
    </p>

    <p>
      Чтобы скомпилировать <em>неоптимизированный</em> билд «Вердж3Д», что хорошо подходит для целей тестирования и отладки, выполните следующую команду в директории DevKit:
    </p>

    <code>npm run build</code>

    <p>
      Вы можете найти скомпилированные модули в директории *build* вашего DevKit. Чтобы протестировать его, просто скопируйте модуль движка *v3d.js* в ваше приложение внутри «Вердж3Д», например:
    </p>

    <code>cp build/v3d.js ~/verge3d/applications/my_awesome_application/</code>

    <p>
      Чтобы скомпилировать <em>оптимизированную</em> версию «Вердж3Д» (она же релизная версия), выполните следующую команду в директории DevKit:
    </p>

    <code>npm run build-release</code>

    <p>
      Для сборки логического редактора пазлов используются следующие команды. Для создания <em>неоптимизированной</em> версии введите:
    </p>

    <code>npm run build-puzzles</code>

    <p>
      Чтобы собрать <em>оптимизированную</em> версию, выполните команду:
    </p>

    <code>npm run build-puzzles-release</code>

    <p>
      Скомпилированный скрипт редактора пазлов находится в директории *puzzles* вашего DevKit. Чтобы применить его к «Вердж3Д», скопируйте все содержимое этого каталога в каталог *puzzles* в вашей директории «Вердж3Д» (заменяя уже существующие там файлы).
    </p>


    [anchor:activating_engine_module]

    <h2>Активация модуля движка</h2>

    <p>
      Для подписывания скомпилированного модуля движка лицензионным ключом, используется утилита <strong>keymanager.py</strong>, расположенная в папке *utils* (требуется установленный «Питон»):
    </p>

    <code>./keymanager activate ../build/v3d.js XXXXXXXXXX</code>

    <p>
      Где XXXXXXXXXX — ваш лицензионный ключ. Поскольку утилита не выводит никакой информации в случае успеха или неудачи, убедитесь, что активация прошла успешно, скопировав модуль движка в какое-нибудь приложение и проверив что водяной знак *MADE WITH VERGE3D TRIAL* больше не выводится.
    </p>


    [anchor:Custom_API_Method]

    <h2>Добавление нового метода в «Ява Скрипт» API</h2>

    <p>
      Допустим, вы хотите добавить еще один метод в класс *App*. Например, метод *printHelloWorld()* должен вывести что-то на консоль браузера:
    </p>

    <code>App.printHelloWorld()</code>

    <p>
      Класс *App* реализован в модуле, расположенном по адресу *src/extras/App.js*. Откройте его и добавьте следующий код в конец файла, прямо перед закрывающими скобками класса *App*. Не забудьте добавить еще одну запятую там, где заканчивается предыдущий метод.
    </p>

    <code>
    printHelloWorld: function() {
        console.log('Hello World!');
    }
    </code>

    <p>
      <a href="manual/ru/programmers_guide/Developer-Kit.html#Building_Verge3D">Соберите</a> и скопируйте среду выполнения пазлов в папку с установленным «Вердж3Д». Теперь вы можете попробовать новый добавленный блок в редакторе пазлов.
    </p>


    [anchor:Custom_API_Class]

    <h2>Добавление нового класса в «Ява Скрипт» API</h2>

    <p>
      Чтобы дополнить API «Вердж3Д» каким-либо пользовательским классом, создайте .js файл с именем вашего класса в соответствующем подкаталоге папки *src* DevKit (например, src/extras/MyAwesomeClass.js). В этом .js-файле реализуйте свой класс - вы можете вдохновиться уже существующими классами. Наконец, зарегистрируйте свой класс в глобальном пространстве имен *v3d*, добавив следующую строку в файл *src/v3d.js*:
    </p>

    <code>export { MyAwesomeClass } from './extras/MyAwesomeClass.js';</code>

    <p>
      <a href="manual/ru/programmers_guide/Developer-Kit.html#Building_Verge3D">Соберите</a> и скопируйте среду выполнения «Вердж3Д» в ваше приложение и попробуйте ее в консоли браузера.
    </p>

    <code>
    const myAwesomeStuff = new v3d.MyAwesomeClass();
    myAwesomeStuff.whatEver();
    </code>


    [anchor:Puzzles_Block]

    <h2>Добавление новых пазлов</h2>

    <p>
      Чтобы создать собственный блок пазлов, отредактируйте файл *puzzles/src/puzzles_blocks.js*. Вы можете вдохновиться уже существующими пазлами. Зарегистрируйте его в соответствующей категории панели инструментов в верхней части файла.
    </p>

    <p>
      <a href="manual/ru/programmers_guide/Developer-Kit.html#Building_Verge3D">Соберите</a> и скопируйте среду выполнения пазлов в папку с установленным «Вердж3Д». Теперь вы должны найти свой новый пазл в панели инструментов Редактора пазлов.
    </p>


    [anchor:supporting_new_platforms_and_architectures]

    <h2>Добавление поддержки новых платформ и архитектур</h2>

    <p>
      «Вердж3Д» является кроссплатформенным программным обеспечением и может быть запущен на любой платформе, способной запустить «Блендер», «3дс Макс» или «Майю». Тем не менее, встроенные glTF-экспортеры требуют наличия утилиты текстурной компрессии *toktx* (часть набора программ KTX texture compression tools).
    </p>
    <p>
      Дистрибутивы «Вердж3Д» поставляются с уже собранной утилитой для большинства платформ: «Виндоус» (Интел 64 бита), «Мак ОС» (Интел 64 бита и «Эпл Силикон»), «Линукс» (Интел/АРМ 64 бита) и «Хром ОС» (Интел/АРМ 64 бита). Для других, например «Виндоус АРМ», «БСД»-системы, «Лунгсон»/«Лунгарч»», «Распберри ПИ», «РИСК-5» и т.д., вам может потребуется собрать набор программ KTX вручную, с помощью инструкций, указанных <a href="https://github.com/KhronosGroup/KTX-Software/blob/main/BUILDING.md" target="_blank">здесь</a> (англ.).
    </p>
    <p>
      После сборки и проверки утилиты *toktx*, поместите её в папку <em>ktx/АРХИТЕКТУРА</em> внутри установочной папки «Вердж3Д». Замените значение <em>АРХИТЕКТУРА</em> на имя нужной платформы. Чтобы узнать это имя, запустите простой «Питон»-скрипт, расположенный в папке *ktx* комплекта разработчика «Вердж3Д»:
    </p>

    <code>./show_arch.py</code>

    <p>для систем «ЮНИКС» или</p>

    <code>python show_arch.py</code>

    <p>для систем «Виндоус».</p>


    <h2>Остались вопросы?</h2>

    <p>Задайте их на нашем <a href="https://www.soft8soft.com/ru/форумы/" target="_blank">форуме</a>!</p>

  </article></body>
</html>
