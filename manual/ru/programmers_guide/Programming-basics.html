<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Основы программирования в Вердж3Д — Софт Эйт Софт</title>
    <meta charset="utf-8">
    <meta name="description" content="Узнайте как создавать WebGL-приложения с использованимем программы Вердж3Д с нуля.">
    <base href="../../../">
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css">
  </head>
  <body><article>
    <h1>Основы программирования в «Вердж3Д»</h1>

    <p>
      Цель этого раздела — краткое введение в программирование с использованием «Вердж3Д». Мы создадим простое, но довольно функциональное приложение с вращающимся кубом, использовав для этого всего несколько строк на языке «Ява Скрипт» и простейшую HTML-разметку.
    </p>

    [contents]


    [anchor:warming_up]

    <h2>Создаём каркас приложения</h2>

    <p>
      Перед тем как писать код самого приложения, создайте папку где оно будет храниться. В этой папке будет находиться HTML-файл с вёрсткой, загружаемая сцена и главный модуль движка «Вердж3Д». Начнём с HTML. Сохраните следующий HTML-код в файл в папке приложения и назначьте ему понятное имя, не забыв про расширение <strong>.html</strong>, например <strong>моё_приложение.html</strong>.
    </p>

    <code>
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
      &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;title&gt;Моё первое Вердж3Д-приложение&lt;/title&gt;
        &lt;style&gt;
          body { margin: 0; }
          #v3d-container { position: absolute; width: 100%; height: 100% }
        &lt;/style&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;div id=&quot;v3d-container&quot;&gt;&lt;/div&gt;
        &lt;script src=&quot;v3d.js&quot;&gt;&lt;/script&gt;
        &lt;script&gt;
          // наш Ява Скрипт пойдёт сюда
        &lt;/script&gt;
      &lt;/body&gt;
    &lt;/html&gt;
    </code>

    <p>
      Как видно, ничего сложного мы не сделали. Имеется простейший HTML-файл с &lt;div&gt;-элементом, предоставляющим контейнер, в котором будет находиться 3Д-холст с кубом. Стили внутри элемента &lt;style&gt; делают так, чтобы 3Д-холст занимал всё доступное место на странице, а наш будущий код пойдёт внутрь тега &lt;script&gt;.
    </p>

    <p>
      Также в этом файле мы подключаем главный модуль движка «Вердж3Д» — <strong>v3d.js</strong>. Вы можете скопировать его из папки <strong>build</strong> из <strong>инсталляционной директории «Вердж3Д»</strong> или скачать <a href="https://cdn.soft8soft.com/demo/blender/cube/v3d.js">отсюда</a>.
    </p>


    [anchor:creating_app]

    <h2>Пишем код приложения</h2>

    <p>
      Чтобы иметь возможность отображать что-либо с помощью «Вердж3Д», нам потребуется экземпляр класса [page:App], который загрузит glTF-файл сцены, содержащий нужный нам куб.
    </p>

    <code>
    const app = new v3d.App('v3d-container');

    app.loadScene('cube.glb', () => {
        app.enableControls();
        app.run();
    });
    </code>

    <p>
      Получается, что нам нужен этот самый glTF-файл, но где его взять? В данный момент задача моделирования перед нами не стоит, поэтому возьмём готовый <a href="https://cdn.soft8soft.com/demo/blender/cube/cube.glb">здесь</a>.
    </p>

    <p>
      HTML-файл приложения готов, но если вы запустите его в браузере, вы увидите... ничего! Дело в том, что браузеры блокируют загрузку ассетов с локальной файловой системы из соображений безопасности, требуя запускать приложения с помощью веб-сервера. Запуск целого сервера может показаться сложной процедурой, но это не так!
    </p>


    [anchor:run_the_app]

    <h2>Запускаем приложение</h2>

    <p>
      Есть масса способов запустить веб-сервер для разработки приложений на локальной машине, но самым простым будет воспользоваться тем, что уже поставляется в составе «Вердж3Д». Скопируйте всю папку с кубом в папку приложений диспетчера приложений и запустите ваше новое приложение с помощью синей кнопки:
    </p>

    <img src="files/programming-basics/running-my-app-from-app-manager.webp" alt="Запуск куба в диспетчере приложений">

    <p>
      Как вариант, если на вашей системе установлен «Питон», вы можете запустить сервер с помощью простейшей команды (запускать в папке с приложением):
    </p>

    <code>python3 -m http.server</code>

    <p>
      Далее откройте браузер, перейдите на страницу <a href="http://0.0.0.0:8000/">http://0.0.0.0:8000</a> и кликните на HTML-файле приложения из предложенного списка.
    </p>


    [anchor:add_animation]

    <h2>Добавляем анимацию</h2>

    <p>
      Первое, что делают начинающие 3Д-программисты — заставляют куб крутиться. Не будем отходить от традиций и тоже реализуем такой поворот. Одним из вариантом было бы проворачивать модель на небольшой угол каждый кадр, но мы сделаем лучше: вместо поворота модели, станем крутить камеру вокруг объекта!
    </p>

    <p>Добавьте следующую строчку кода сразу под вызовом метода <strong>app.run()</strong>:</p>

    <code>
    app.controls.autoRotate = true;
    </code>


    [anchor:wrapping_up]

    <h2>Закругляемся</h2>

    <p>
      Поздравляем! Вы только что создали ваше первое «Вердж3Д»-приложение. В нём всего лишь пять строчек на «Ява Скрипте», но оно уже способно на многое:
    </p>

    <ul>
      <li>Загружает сцену, камеру, источник света и 3Д-модель.</li>
      <li>Использует сложный шейдер освещения на основе PBR, собранный на лету из материала, который в свою очередь основан на системе шейдерных нод. Сам материал был скомпонован не нами, а опытным художником в его любимом пакете моделирования.</li>
      <li>Пользователь может управлять камерой с помощью мыши или тачскрина мобильного устройства.</li>
      <li>На сцене используется освещение с помощью карты окружения в формате HDR. Карта загружается, парсится и преобразовывается в нужный формат автоматически.</li>
      <li>И конечно, на сцене используется камера, двигающаяся по сложной орбитальной траектории</li>
    </ul>

    <p>Полный код приложения будет выглядеть так:</p>

    <code>
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
      &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Моё первое Вердж3Д-приложение&lt;/title&gt;
        &lt;style&gt;
          body { margin: 0; }
          #v3d-container { position: absolute; width: 100%; height: 100% }
        &lt;/style&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;div id=&quot;v3d-container&quot;&gt;&lt;/div&gt;
        &lt;script src=&quot;v3d.js&quot;&gt;&lt;/script&gt;
        &lt;script&gt;
          const app = new v3d.App('v3d-container');

          app.loadScene('cube.glb', () =&gt; {
              app.enableControls();
              app.run();
              app.controls.autoRotate = true;
          });
        &lt;/script&gt;
      &lt;/body&gt;
    &lt;/html&gt;
    </code>


    [anchor:whats_next]

    <h2>Дальнейшие шаги</h2>

    <p>
      Платформа Node.js и система управления пакетами npm предоставляют огромную экосистему для «Ява Скрипт»-разработчиков. <a href="manual/ru/programmers_guide/Using-NodeJS-NPM.html">Воспользуйтесь ими</a>, чтобы значительно повысить эффективность вашей работы.
    </p>

  </article></body>
</html>
